;/*FB_PKG_DELIM*/

__d("WAJobs",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function i(){if(h==null)throw c("WAErr")("WAJobs api called before set");return h}function a(a){h=a}function b(){return i().jobResultConverter}function d(){return i().persistedJobs.api}function e(){return i().persistedJobs.manager}g.setJobsDependencies=a;g.getJobResultConvertersImpls=b;g.getPersistedJobsApi=d;g.getJobManager=e}),98);
__d("MAWGlobals",["WAGlobals","WAJobs","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null;function j(){if(i==null)throw c("err")("MawMsgr api called before set");return i}function a(){return j().config}function b(a){i=a,d("WAGlobals").setGlobals(a),d("WAJobs").setJobsDependencies(a)}function e(a){if(i==null)throw c("err")("Cannot set CAT before all globals were set");i.fbCat=a}function f(){return j().fbCat}function k(){return j().db}function l(){return j().persistedJobs.api}function m(){return j().persistedJobs.manager}function n(){return j().hmacKey}function o(){return j().dependencies}function p(a){if(i==null)throw c("err")("Cannot set CAT before all globals were set");i.activeThreadKey=a}function q(){return j().activeThreadKey}function r(){return j().offlineResumeStats}g.setMyJids=(h=d("WAGlobals")).setMyJids;g.getMyDeviceJid=h.getMyDeviceJid;g.getMyUserJid=h.getMyUserJid;g.getJobResultConvertersImpls=d("WAJobs").getJobResultConvertersImpls;g.isPeerDevice=h.isPeerDevice;g.getJidUtilsApi=h.getJidUtilsApi;g.getCryptoManager=h.getCryptoManager;g.getInMemorySignal=h.getInMemorySignal;g.getConfig=a;g.setGlobals=b;g.setFbCat=e;g.getFbCat=f;g.getDbImpls=k;g.getPersistedJobsApi=l;g.getJobManager=m;g.getHMACKey=n;g.getDependencies=o;g.setMAWActiveChatThreadKey=p;g.getMAWActiveChatThreadKey=q;g.getOfflineResumeStats=r}),98);
__d("MAWHexUtils",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.toString(16);return(a.length-1).toString(16)+a}function b(a){for(var b=1;b<a.length;b++){var d=a.substring(0,b),e=a.substring(b);if(e.length-1===parseInt(d,16))return parseInt(e,16)}throw c("err")("Cannot convert the order-preserving-hex back to number")}g.orderPreservingHex=a;g.reverseOrderPreservingHex=b}),98);
__d("MAWDbMsg",["FBLogger","MAWDbChatId","MAWHexUtils","MAWMsgType","OfflineThreadingId","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;h=[(h=d("MAWMsgType")).MSG_TYPE.REVOKED,h.MSG_TYPE.EPHEMERAL_SYNC_RESPONSE,h.MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE,h.MSG_TYPE.GROUP_INVITE,h.MSG_TYPE.SK_DISTRIBUTION,h.MSG_TYPE.RAVEN_ACTION];function a(a){return q(a)?a:null}function b(a){return a}var i="futureproof",j="futureproof_spam",k="spam",l="toBeRead",m="e2ee_admin_msg",n="cutover_admin_msg";function o(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_m"}function e(a,b){return!c("justknobx")._("1903")?o(a,b):d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_um"}function f(a,b){return!c("justknobx")._("1903")?o(a,b):d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_r"}function p(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_DEBUG_"+d("MAWHexUtils").orderPreservingHex(Math.floor(Math.random()*1e4))}function q(a){var b=a.indexOf("_");if(b<=0)return!1;b=a.indexOf("_",b+2);return b!==a.length-2?!1:a.charAt(a.length-1)==="m"}function r(a){return a+"_"+l}function s(a){return a+"_"+m}function t(a){return a+"_"+n}function u(a){a=a.split("_");a=a[0];return d("MAWDbChatId").unsafeCoerceToChatId(d("MAWHexUtils").reverseOrderPreservingHex(a))}function v(a){a=a.split("_");a[0];a=a[1];return d("MAWHexUtils").reverseOrderPreservingHex(a)}function w(a){return d("MAWHexUtils").orderPreservingHex(a)+"_"}function x(a){return d("MAWHexUtils").orderPreservingHex(a)+"_z"}function y(a){try{var b=u(a);a=v(a);return o(b,a+1)+"_o"}catch(a){return d("OfflineThreadingId").createOfflineThreadingID()}}function z(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.XMA:return!0;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.RAVEN:return!1}throw c("FBLogger")("mpf_web_foundations").mustfixThrow('Invalid msg type for isXMAMsg check: "%s"',a.type)}function A(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:return!0;case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:return!1}throw c("FBLogger")("mpf_web_foundations").mustfixThrow('Invalid msg type for isMediaMsg check: "%s"',a.type)}function B(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:return!0;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case d("MAWMsgType").MSG_TYPE.RAVEN_ACTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return!1}throw c("FBLogger")("mpf_web_foundations").mustfixThrow('Invalid msg type for isContentMsg check: "%s"',a.type)}function C(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:return!0;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return!1}throw c("FBLogger")("mpf_web_foundations").mustfixThrow('Invalid msg type for isMsgEligibleForTriggeringEphemeralSyncResponse check: "%s"',a.type)}function D(a){return F(a.type)}function E(a){return a.type===d("MAWMsgType").MSG_TYPE.ADMIN}function F(a){return a==="EphemeralSyncResponse"||a==="EphemeralSettingChangeFromCurrentDevice"||a==="GroupInvite"||a==="SenderKeyDistribution"||a==="RavenAction"||a==="EditAction"}function G(a){return a==="RavenAction"}function H(a){return a.originalTs!=null?a.originalTs:I(a)}function I(a){return a.serverTs!=null?a.serverTs:a.ts}function J(a){if(a.sortOrderMs!=null)return a.sortOrderMs;else return I(a)*1e3}function K(a,b){if(a.serverTs!=null)return Math.max(b+1,a.serverTs*1e3);else return b+1}function L(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:return a.msgContent;case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return a.editMsgContent;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:return}throw c("FBLogger")("mpf_web_foundations").mustfixThrow('Invalid msg type for getMsgContent check: "%s"',a.type)}g.NO_CONTENT_MESSAGE_TYPES_ALLOWLIST=h;g.toMsgId=a;g.stanzaIdToMsgId=b;g.FUTUREPROOF_ALT_INDEX=i;g.FUTUREPROOF_SPAM_ALT_INDEX=j;g.SPAM_ALT_INDEX=k;g.craftMsgId=o;g.craftUnrenderedMsgId=e;g.craftReactionId=f;g.craftDebugMsgId=p;g.isValidMsgId=q;g.craftToBeReadAltIndex=r;g.craftE2eeAdminMsgAltIndex=s;g.craftCutoverAdminMsgAltIndex=t;g.getThreadIdFromMsgId=u;g.getInChatMsgIdFromMsgId=v;g.msgIdsInChatLowerBound=w;g.msgIdsInChatUpperBound=x;g.getNextOptimisticId=y;g.isXMAMsg=z;g.isMediaMsg=A;g.isContentMsg=B;g.isMsgEligibleForTriggeringEphemeralSyncResponse=C;g.isUnrenderedMsg=D;g.isAdminMsg=E;g.isUnrenderedMsgType=F;g.isRavenActionMsgType=G;g.getOriginalTsFromMsg=H;g.getCanonicalTsFromMsg=I;g.getSortOrderWithFallback=J;g.getSortOrderFromPrevious=K;g.getMsgContent=L}),98);
__d("MAWFolderTypes",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=10;var g={ARCHIVED:e,INBOX:a,OTHER:c,PENDING:b,SPAM:d};f.INBOX=a;f.PENDING=b;f.OTHER=c;f.SPAM=d;f.ARCHIVED=e;f.FOLDER_ID=g}),66);
__d("MAWLocalizationType",[],(function(a,b,c,d,e,f){"use strict";a="emptySnippet";b="currentUserCreatedGroup";c="participantCreatedGroup";d="unknownUserCreatedGroup";e="currentUserNamedGroup";var g="unkonwnUserNamedGroup",h="participantNamedGroup",i="currentUserAddedDevice",j="participantAddedDevice",k="currentUserRemovedDevice",l="participantRemovedDevice",m="currentUserUpdatedDevice",n="participantUpdatedDevice",o="currentUserAddedOneParticipant",p="currentUserAddedTwoParticipant",q="currentUserAddedMoreThanTwoParticipant",r="participantAddedYou",s="participantAddedYouAndOneUser",t="participantAddedYouAndMoreThanOneUsers",u="unknowUserAddedYou",v="unknowUserAddedYouAndOneUser",w="unknowUserAddedYouAndMoreThanOneUser",x="unknownUserAddedOneUser",y="unknownUserAddedTwoUser",z="unknownUserAddedMoreThanTwoUser",A="participantAddedOneUser",B="participantAddedTwoUser",C="participantAddedMoreThanTwoUser",D="currentUserRemovedOneParticipant",E="currentUserRemovedTwoParticipant",F="currentUserRemovedMoreThanTwoParticipant",G="participantRemovedYou",H="participantRemovedYouAndOneUser",I="participantRemovedYouAndMoreThanOneUsers",J="unknowUserRemovedYou",K="unknowUserRemovedYouAndOneUser",L="unknowUserRemovedYouAndMoreThanOneUser",M="unknownUserRemovedOneUser",N="unknownUserRemovedTwoUser",O="unknownUserRemovedMoreThanTwoUser",P="participantRemovedOneUser",Q="participantRemovedTwoUser",R="participantRemovedMoreThanTwoUser",S="participantLeftGroup",aa="currentUserLeftGroup",ba="currentUserGotPromoted",ca="currentUserGotDemoted",da="participantGotPromoted",ea="participantGotDemoted",fa="participantPromotedYou",ga="participantDemotedYou",ha="currentUserPromotedParticipant",ia="currentUserDemotedParticipant",ja="participantDemotedParticipant",ka="participantPromotedParticipant",la="participantSelfDemoted",ma="currentUserSelfDemoted",T="currentUserSendText",na="currentUserSendImage",oa="currentUserSendVideo",pa="currentUserSendAudio",qa="currentUserSendGif",ra="currentUserSendSticker",sa="participantSendText",ta="participantSendTextInGroup",ua="participantSendImage",va="participantSendVideo",wa="participantSendAudio",xa="participantSendGif",ya="participantSendSticker",za="unavailableSnippet",Aa="twoUsersConnected",Ba="reachabilityError",U="unknownUserEphemeralSettingTurnedOnSeconds",Ca="unknownUserEphemeralSettingTurnedOnMinutes",Da="unknownUserEphemeralSettingTurnedOnHours",Ea="unknownUserEphemeralSettingTurnedOnDays",Fa="youEphemeralSettingTurnedOnSeconds",Ga="youEphemeralSettingTurnedOnMinutes",Ha="youEphemeralSettingTurnedOnHours",Ia="youEphemeralSettingTurnedOnDays",Ja="participantEphemeralSettingTurnedOnSeconds",Ka="participantEphemeralSettingTurnedOnMinutes",La="participantEphemeralSettingTurnedOnHours",Ma="participantEphemeralSettingTurnedOnDays",Na="unknownUserEphemeralSettingChangeSeconds",Oa="unknownUserEphemeralSettingChangeMinutes",Pa="unknownUserEphemeralSettingChangeHours",Qa="unknownUserEphemeralSettingChangeDays",Ra="youEphemeralSettingChangeSeconds",Sa="youEphemeralSettingChangeMinutes",Ta="youEphemeralSettingChangeHours",Ua="youEphemeralSettingChangeDays",Va="participantEphemeralSettingChangeSeconds",Wa="participantEphemeralSettingChangeMinutes",Xa="participantEphemeralSettingChangeHours",Ya="participantEphemeralSettingChangeDays",Za="sendBasedUnknownUserEphemeralSettingTurnedOnSeconds",$a="sendBasedUnknownUserEphemeralSettingTurnedOnMinutes",ab="sendBasedUnknownUserEphemeralSettingTurnedOnHours",bb="sendBasedUnknownUserEphemeralSettingTurnedOnDays",cb="sendBasedYouEphemeralSettingTurnedOnSeconds",db="sendBasedYouEphemeralSettingTurnedOnMinutes",eb="sendBasedYouEphemeralSettingTurnedOnHours",fb="sendBasedYouEphemeralSettingTurnedOnDays",gb="sendBasedParticipantEphemeralSettingTurnedOnSeconds",hb="sendBasedParticipantEphemeralSettingTurnedOnMinutes",ib="sendBasedParticipantEphemeralSettingTurnedOnHours",jb="sendBasedParticipantEphemeralSettingTurnedOnDays",kb="sendBasedUnknownUserEphemeralSettingChangeSeconds",lb="sendBasedUnknownUserEphemeralSettingChangeMinutes",mb="sendBasedUnknownUserEphemeralSettingChangeHours",nb="sendBasedUnknownUserEphemeralSettingChangeDays",ob="sendBasedYouEphemeralSettingChangeSeconds",pb="sendBasedYouEphemeralSettingChangeMinutes",qb="sendBasedYouEphemeralSettingChangeHours",rb="sendBasedYouEphemeralSettingChangeDays",sb="sendBasedParticipantEphemeralSettingChangeSeconds",tb="sendBasedParticipantEphemeralSettingChangeMinutes",ub="sendBasedParticipantEphemeralSettingChangeHours",vb="sendBasedParticipantEphemeralSettingChangeDays",wb="unknownUserEphemeralSettingTurnedOff",xb="youEphemeralSettingTurnedOff",yb="participantEphemeralSettingTurnedOff",zb="currentUserUnsentMessage",Ab="participantUnsentMessage",Bb="participantReactMessage",Cb="participantReactMessageInGroup",V="unknownUserEphemeralTakeScreenshot",Db="unknownUserEphemeralRecordScreen",Eb="youEphemeralTakeScreenshot",Fb="youEphemeralRecordScreen",Gb="participantEphemeralTakeScreenshot",Hb="participantEphemeralRecordScreen",Ib="icdcAlertAdminMessage",Jb="yourDeviceICDCAlertAdminMessage",W="cutoverThreadAdminMessage",X="cutoverIGDThreadAdminMessage",Y="cutoverRollbackAdminMessage",Kb="currentUserSendAttachment",Lb="participantSendAttachment",Mb="currentUserSentPost",Nb="currentUserSentReel",Ob="currentUserSentStory",Pb="currentUserMentionedStoryIG",Qb="currentUserReceivedStoryMentionIG",Rb="participantSentPost",Sb="participantSentReel",Tb="participantSentStory",Ub="currentUserSentStoryHighlight",Vb="participantSentStoryHighlight",Z="dualThreadCutoverAdminMessage",$="e2eeThreadDescription",Wb="debugMsg",Xb="currentUserMissedAudioCall",Yb="participantMissedAudioCall",Zb="currentUserMissedVideoCall",$b="participantMissedVideoCall",ac="currentUserAudioCalled",bc="participantAudioCalled",cc="currentUserVideoCalled",dc="participantVideoCalled",ec="currentUserStartedGroupAudioCall",fc="participantStartedGroupAudioCall",gc="currentUserStartedGroupVideoCall",hc="participantStartedGroupVideoCall",ic="currentUserCustomizeHotlike",jc="participantCustomizeHotlike",kc="currentUserCustomizeNickname",lc="currentUserCustomizeTheme",mc="participantCustomizeParticipantNickname",nc="participantClearParticipantNickname",oc="participantCustomizeTheme",pc="participantCustomizeCurrentUserNickname",qc="currentUserSetOwnNickname",rc="currentUserClearOwnNickname",sc="currentUserClearParticipantNickname",tc="participantSetOwnNickname",uc="participantClearOwnNickname",vc="participantClearCurrentUserNickname";q={CURRENT_USER_ADDED_DEVICE:i,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:q,CURRENT_USER_ADDED_ONE_PARTICIPANT:o,CURRENT_USER_ADDED_TWO_PARTICIPANTS:p,CURRENT_USER_AUDIO_CALLED:ac,CURRENT_USER_CLEAR_OWN_NICKNAME:rc,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:sc,CURRENT_USER_CREATED_GROUP:b,CURRENT_USER_CUSTOMIZE_HOTLIKE:ic,CURRENT_USER_CUSTOMIZE_NICKNAME:kc,CURRENT_USER_CUSTOMIZE_THEME:lc,CURRENT_USER_DEMOTED_PARTICIPANT:ia,CURRENT_USER_GOT_DEMOTED:ca,CURRENT_USER_GOT_PROMOTED:ba,CURRENT_USER_LEFT_GROUP:aa,CURRENT_USER_MENTIONED_STORY_IG:Pb,CURRENT_USER_MISSED_AUDIO_CALL:Xb,CURRENT_USER_MISSED_VIDEO_CALL:Zb,CURRENT_USER_NAMED_GROUP:e,CURRENT_USER_PROMOTED_PARTICIPANT:ha,CURRENT_USER_RECEIVED_STORY_MENTION_IG:Qb,CURRENT_USER_REMOVED_DEVICE:k,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:F,CURRENT_USER_REMOVED_ONE_PARTICIPANT:D,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:E,CURRENT_USER_SELF_DEMOTED:ma,CURRENT_USER_SEND_ATTACHMENT:Kb,CURRENT_USER_SEND_AUDIO:pa,CURRENT_USER_SEND_GIF:qa,CURRENT_USER_SEND_IMAGE:na,CURRENT_USER_SEND_STICKER:ra,CURRENT_USER_SEND_TEXT:T,CURRENT_USER_SEND_VIDEO:oa,CURRENT_USER_SENT_POST:Mb,CURRENT_USER_SENT_REEL:Nb,CURRENT_USER_SENT_STORY:Ob,CURRENT_USER_SENT_STORY_HIGHLIGHT:Ub,CURRENT_USER_SET_OWN_NICKNAME:qc,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:ec,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:gc,CURRENT_USER_UNSENT_MESSAGE:zb,CURRENT_USER_UPDATED_DEVICE:m,CURRENT_USER_VIDEO_CALLED:cc,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:X,CUTOVER_ROLLBACK_ADMIN_MESSAGE:Y,CUTOVER_THREAD_ADMIN_MESSAGE:W,DEBUG_MSG:Wb,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:Z,E2EE_THREAD_DESCRIPTION:$,EMPTY_SNIPPET:a,ICDC_ALERT_ADMIN_MESSAGE:Ib,PARTICIPANT_ADDED_DEVICE:j,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:C,PARTICIPANT_ADDED_ONE_USER:A,PARTICIPANT_ADDED_TWO_USER:B,PARTICIPANT_ADDED_YOU:r,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:t,PARTICIPANT_ADDED_YOU_AND_ONE_USER:s,PARTICIPANT_AUDIO_CALLED:bc,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:vc,PARTICIPANT_CLEAR_OWN_NICKNAME:uc,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:nc,PARTICIPANT_CREATED_GROUP:c,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:pc,PARTICIPANT_CUSTOMIZE_HOTLIKE:jc,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:mc,PARTICIPANT_CUSTOMIZE_THEME:oc,PARTICIPANT_DEMOTED_PARTICIPANT:ja,PARTICIPANT_DEMOTED_YOU:ga,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:Hb,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:Ya,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:Xa,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:Wa,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:Va,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:yb,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ma,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:La,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ka,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:Ja,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:Gb,PARTICIPANT_GOT_DEMOTED:ea,PARTICIPANT_GOT_PROMOTED:da,PARTICIPANT_LEFT_GROUP:S,PARTICIPANT_MISSED_AUDIO_CALL:Yb,PARTICIPANT_MISSED_VIDEO_CALL:$b,PARTICIPANT_NAMED_GROUP:h,PARTICIPANT_PROMOTED_PARTICIPANT:ka,PARTICIPANT_PROMOTED_YOU:fa,PARTICIPANT_REACT_MESSAGE:Bb,PARTICIPANT_REACT_MESSAGE_IN_GROUP:Cb,PARTICIPANT_REMOVED_DEVICE:l,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:R,PARTICIPANT_REMOVED_ONE_USER:P,PARTICIPANT_REMOVED_TWO_USER:Q,PARTICIPANT_REMOVED_YOU:G,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:I,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:H,PARTICIPANT_SELF_DEMOTED:la,PARTICIPANT_SEND_ATTACHMENT:Lb,PARTICIPANT_SEND_AUDIO:wa,PARTICIPANT_SEND_GIF:xa,PARTICIPANT_SEND_IMAGE:ua,PARTICIPANT_SEND_STICKER:ya,PARTICIPANT_SEND_TEXT:sa,PARTICIPANT_SEND_TEXT_IN_GROUP:ta,PARTICIPANT_SEND_VIDEO:va,PARTICIPANT_SENT_POST:Rb,PARTICIPANT_SENT_REEL:Sb,PARTICIPANT_SENT_STORY:Tb,PARTICIPANT_SENT_STORY_HIGHLIGHT:Vb,PARTICIPANT_SET_OWN_NICKNAME:tc,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:fc,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:hc,PARTICIPANT_UNSENT_MESSAGE:Ab,PARTICIPANT_UPDATED_DEVICE:n,PARTICIPANT_VIDEO_CALLED:dc,REACHABILITY_ERROR:Ba,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:vb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:ub,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:tb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:sb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:jb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:ib,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:hb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:gb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:nb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:mb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:lb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:kb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:bb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:ab,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:$a,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:Za,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_DAYS:rb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_HOURS:qb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:pb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:ob,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:fb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:eb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:db,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:cb,TWO_USERS_CONNECTED:Aa,UNAVAILABLE_SNIPPET:za,UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:z,UNKNOW_USER_ADDED_ONE_USER:x,UNKNOW_USER_ADDED_TWO_USER:y,UNKNOW_USER_ADDED_YOU:u,UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:w,UNKNOW_USER_ADDED_YOU_AND_ONE_USER:v,UNKNOW_USER_REMOVED_MORE_THAN_TWO_USER:O,UNKNOW_USER_REMOVED_ONE_USER:M,UNKNOW_USER_REMOVED_TWO_USER:N,UNKNOW_USER_REMOVED_YOU:J,UNKNOW_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:L,UNKNOW_USER_REMOVED_YOU_AND_ONE_USER:K,UNKNOWN_USER_CREATED_GROUP:d,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:Db,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:Qa,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:Pa,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:Oa,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:Na,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:wb,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ea,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:Da,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ca,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:U,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:V,UNKNOWN_USER_NAMED_GROUP:g,YOU_EPHEMERAL_RECORD_SCREEN:Fb,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:Ua,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:Ta,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:Sa,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:Ra,YOU_EPHEMERAL_SETTING_TURNED_OFF:xb,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ia,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:Ha,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ga,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:Fa,YOU_EPHEMERAL_TAKE_SCREENSHOT:Eb,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:Jb};f.CURRENT_USER_CREATED_GROUP=b;f.CURRENT_USER_ADDED_DEVICE=i;f.CURRENT_USER_SEND_TEXT=T;f.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=U;f.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=V;f.CUTOVER_THREAD_ADMIN_MESSAGE=W;f.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=X;f.CUTOVER_ROLLBACK_ADMIN_MESSAGE=Y;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=Z;f.E2EE_THREAD_DESCRIPTION=$;f.LOCALIZATION_TYPE=q}),66);
__d("MAWImageUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i="image/jpeg";e=100;function j(a,d){d===void 0&&(d=!0);var e;return new(h||(h=b("Promise")))(function(b,f){e=new Image();var g=/^(?:data|blob):/.test(a);d&&!g&&e.setAttribute("crossOrigin","anonymous");e.onload=b;e.onabort=function(){f(function(){throw c("err")("Error loading image from provided URL")})};e.onerror=function(){f(function(){throw c("err")("Wrong blob type")})};e.src=a}).then(function(){return e})}function k(a,c,d,e){d===void 0&&(d=!1);var f=40*1024;if(a.toBlob)return new(h||(h=b("Promise")))(function(b){var d=e==null?void 0:e/100;a.toBlob(b,c,d)}).then(function(e){return d&&e.size>=f?new(h||(h=b("Promise")))(function(b){a.toBlob(b,c,f/e.size)}):e});else return(h||(h=b("Promise"))).resolve(window.dataURLtoBlob(a.toDataURL(c))).then(function(e){return d&&e.size>=f?(h||(h=b("Promise"))).resolve(window.dataURLtoBlob(a.toDataURL(c,f/e.size))):e})}function a(a,d,e){return j(a).then(function(a){var b=document.createElement("canvas");b.width=a.naturalWidth;b.height=a.naturalHeight;var c=b.getContext("2d");m(b);c.drawImage(a,0,0);return k(b,d,!1,e).then(function(b){return{blob:b,height:a.naturalHeight,width:a.naturalWidth}})})["catch"](function(a){return(h||(h=b("Promise"))).reject(function(){throw c("err")(a)})})}function d(a,b){return j(a).then(function(a){var c=document.createElement("canvas"),d=a.naturalWidth,e=a.naturalHeight,f=c.getContext("2d");e=n(e,d,b);c.width=e.width;c.height=e.height;var g=c.width,h=c.height;l(c);f.drawImage(a,0,0,g,h);return k(c,i,!0).then(function(a){return a.arrayBuffer().then(function(a){return{height:h,jpegThumbnail:a,width:g}})})})}function l(a){var b=a.getContext("2d");b.fillStyle="rgb(247,247,247)";b.fillRect(0,0,a.width,a.height)}function m(a){var b=a.getContext("2d");b.fillStyle="rgb(255,255,255)";b.fillRect(0,0,a.width,a.height)}function n(a,b,c){b=b!=null?b:c;a=a!=null?a:c;b>a?b>c&&(a*=c/b,b=c):a>c&&(b*=c/a,a=c);return{height:Math.max(a,1),width:Math.max(b,1)}}g.TYPE_JPEG=i;g.IMG_THUMB_MAX_EDGE=e;g.canvasToBlob=k;g.urlToFile=a;g.urlToThumbnail=d;g.boundHeightWidth=n}),98);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);b=d("MAWSendQplToServer").startQplUserFlow(c("qpl")._(1056840460,"718"),{"int":{input_file_size:b.size},string:{mimetype:b.type,preprocess_type:a}},e);return b}g.startMediaPreProcessQpl=a}),98);
__d("WABlobToImage",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){var c;return new(g||(g=b("Promise")))(function(b,d){c=new Image();var e=URL.createObjectURL(a),f=function(){return URL.revokeObjectURL(e)};c.onload=function(){b({image:c,releaseImageMemory:f})};c.onerror=function(){f(),d("loadBlobToImage error")};c.src=e})}f.blobToImage=a}),66);
__d("WADecodeImage",["WABlobToImage","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["decodeImage"]);e=typeof self.createImageBitmap==="function"&&typeof self.OffscreenCanvas==="function";f=e?a:c;function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){j.DEV(i(),a.name);a=(yield self.createImageBitmap(a));var b=a.width,c=a.height,d=new self.OffscreenCanvas(b,c);d=m({canvas:d,width:b,height:c,image:a});return d});return k.apply(this,arguments)}function c(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){j.DEV(h(),a.name);a=(yield d("WABlobToImage").blobToImage(a));var b=a.image;a=a.releaseImageMemory;var c=document.createElement("canvas");c=m({canvas:c,width:b.naturalWidth,height:b.naturalHeight,image:b});a();return c});return l.apply(this,arguments)}function m(a){var b=a.canvas,c=a.image,d=a.width;a=a.height;b.width=d;b.height=a;var e=b.getContext("2d");e.fillStyle="rgb(255,255,255)";e.fillRect(0,0,b.width,b.height);e.drawImage(c,0,0);b=e.getImageData(0,0,d,a);return b}g.decodeImage=f;g.decodeImageWithDOM=c}),98);
__d("WAEncodeProgressiveJpeg",["WATagsLogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["finished compressing, compressed file size: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start compressing, original file size: ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["WAMozjpeg"]);function a(a){return function(b){var c=b.imageData,d=b.quality;b=b.useHdScanConfig;var e=c.data,f=c.width;c=c.height;j.DEV(i(),e.byteLength);var g=new Uint8Array(e);e=a._malloc(e.byteLength);a.HEAPU8.set(g,e);g=a.ccall("encode_progressive_jpeg","number",["number","number","number","number","number","boolean"],[e,g.byteLength,f,c,d,b]);f=a.HEAPU32[g/4];c=a.HEAPU32[g/4+1];j.DEV(h(),c);d=new Uint8Array(a.HEAPU8.subarray(f,f+c));a._free(e);a._free(f);return d}}g.createEncodeProgressiveJpeg=a}),98);
__d("WAMozjpegWasm",["Promise"],(function(a,b,c,d,e,f){var g,h=function(){var a=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(c){c=c||{};var c=typeof c!="undefined"?c:{},d,i;c.ready=new(g||(g=b("Promise")))(function(a,b){d=a,i=b});var j=Object.assign({},c),k=[],l="./this.program",m=function(a,b){throw b},aa=!0,n=!1,o="";function p(a){return c.locateFile?c.locateFile(a,o):o+a}var q,ba,r;(aa||n)&&(n?o=self.location.href:typeof document!="undefined"&&document.currentScript&&(o=document.currentScript.src),a&&(o=a),o.indexOf("blob:")!==0?o=o.substr(0,o.replace(/[?#].*/,"").lastIndexOf("/")+1):o="",(q=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.send(null);return b.responseText},n&&(r=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)}),ba=function(a,b,c){var d=new XMLHttpRequest();d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){if(d.status==200||d.status==0&&d.response){b(d.response);return}c()};d.onerror=c;d.send(null)}),function(a){return document.title=a});var s=emptyFunction.bind(console),t=emptyFunction.bind(console);Object.assign(c,j);j=null;var u,ca=!0;typeof WebAssembly!="object"&&H("no native wasm support detected");var v,w=!1;function da(a,b){a||H(b)}var ea=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function x(a,b,c){c=b+c;var d=b;while(a[d]&&!(d>=c))++d;if(d-b>16&&a.buffer&&ea)return ea.decode(a.subarray(b,d));c="";while(b<d){var e=a[b++];if(!(e&128)){c+=String.fromCharCode(e);continue}var f=a[b++]&63;if((e&224)==192){c+=String.fromCharCode((e&31)<<6|f);continue}var g=a[b++]&63;(e&240)==224?e=(e&15)<<12|f<<6|g:e=(e&7)<<18|f<<12|g<<6|a[b++]&63;if(e<65536)c+=String.fromCharCode(e);else{f=e-65536;c+=String.fromCharCode(55296|f>>10,56320|f&1023)}}return c}function fa(a,b){return a?x(B,a,b):""}function y(a,b,c,d){if(!(d>0))return 0;var e=c;d=c+d-1;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(g>=55296&&g<=57343){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}if(g<=127){if(c>=d)break;b[c++]=g}else if(g<=2047){if(c+1>=d)break;b[c++]=192|g>>6;b[c++]=128|g&63}else if(g<=65535){if(c+2>=d)break;b[c++]=224|g>>12;b[c++]=128|g>>6&63;b[c++]=128|g&63}else{if(c+3>=d)break;b[c++]=240|g>>18;b[c++]=128|g>>12&63;b[c++]=128|g>>6&63;b[c++]=128|g&63}}b[c]=0;return c-e}function ga(a,b,c){return y(a,B,b,c)}function z(a){var b=0;for(var c=0;c<a.length;++c){var d=a.charCodeAt(c);d<=127?b++:d<=2047?b+=2:d>=55296&&d<=57343?(b+=4,++c):b+=3}return b}var ha,A,B,C,D;function ia(a){ha=a,c.HEAP8=A=new Int8Array(a),c.HEAP16=new Int16Array(a),c.HEAP32=C=new Int32Array(a),c.HEAPU8=B=new Uint8Array(a),c.HEAPU16=new Uint16Array(a),c.HEAPU32=D=new Uint32Array(a),c.HEAPF32=new Float32Array(a),c.HEAPF64=new Float64Array(a)}var ja,ka=[],la=[],ma=[];function na(){return ca}function oa(){Ba(ka)}function pa(){!c.noFSInit&&!Q.init.initialized&&Q.init(),Q.ignorePermissions=!1,O.init(),Ba(la)}function qa(){Ba(ma)}function ra(a){la.unshift(a)}var E=0,sa=null,F=null;function ta(a){return a}function ua(a){E++}function G(a){E--;if(E==0){sa!==null&&(clearInterval(sa),sa=null);if(F){a=F;F=null;a()}}}function H(a){a="Aborted("+a+")";t(a);w=!0;a+=". Build with -sASSERTIONS for more info.";a=new WebAssembly.RuntimeError(a);i(a);throw a}var va="data:application/octet-stream;base64,";function wa(a){return a.startsWith(va)}var I;I="WAMozjpegWasm.wasm";wa(I)||(I=p(I));function xa(a){try{if(a==I&&u)return new Uint8Array(u);if(r)return r(a);throw"both async and sync fetching of the wasm failed"}catch(a){H(a)}}function ya(){return!u&&(aa||n)&&typeof fetch=="function"?fetch(I,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+I+"'";return a.arrayBuffer()})["catch"](function(){return xa(I)}):(g||(g=b("Promise"))).resolve().then(function(){return xa(I)})}function za(){var b={a:gb};function d(b,a){a=b.exports;c.asm=a;v=c.asm.x;ia(v.buffer);ja=c.asm.z;ra(c.asm.y);G("wasm-instantiate")}ua("wasm-instantiate");function g(a){d(a.instance)}function h(a){return ya().then(function(a){return WebAssembly.instantiate(a,b)}).then(function(a){return a}).then(a,function(a){t("failed to asynchronously prepare wasm: "+a),H(a)})}function j(){if(!u&&typeof WebAssembly.instantiateStreaming=="function"&&!wa(I)&&typeof fetch=="function")return fetch(I,{credentials:"same-origin"}).then(function(a){a=WebAssembly.instantiateStreaming(a,b);return a.then(g,function(a){t("wasm streaming compile failed: "+a);t("falling back to ArrayBuffer instantiation");return h(g)})});else return h(g)}if(c.instantiateWasm)try{var a=c.instantiateWasm(b,d);return a}catch(a){t("Module.instantiateWasm callback failed with error: "+a),i(a)}j()["catch"](i);return{}}var J,K;function Aa(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}function Ba(a){while(a.length>0)a.shift()(c)}function Ca(a){return hb(a+24)+24}var L=0;function Da(a){this.excPtr=a,this.ptr=a-24,this.set_type=function(a){D[this.ptr+4>>2]=a},this.get_type=function(){return D[this.ptr+4>>2]},this.set_destructor=function(a){D[this.ptr+8>>2]=a},this.get_destructor=function(){return D[this.ptr+8>>2]},this.set_refcount=function(a){C[this.ptr>>2]=a},this.set_caught=function(a){a=a?1:0,A[this.ptr+12>>0]=a},this.get_caught=function(){return A[this.ptr+12>>0]!=0},this.set_rethrown=function(a){a=a?1:0,A[this.ptr+13>>0]=a},this.get_rethrown=function(){return A[this.ptr+13>>0]!=0},this.init=function(a,b){this.set_adjusted_ptr(0),this.set_type(a),this.set_destructor(b),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var a=C[this.ptr>>2];C[this.ptr>>2]=a+1},this.release_ref=function(){var a=C[this.ptr>>2];C[this.ptr>>2]=a-1;return a===1},this.set_adjusted_ptr=function(a){D[this.ptr+16>>2]=a},this.get_adjusted_ptr=function(){return D[this.ptr+16>>2]},this.get_exception_ptr=function(){var a=kb(this.get_type());if(a)return D[this.excPtr>>2];a=this.get_adjusted_ptr();return a!==0?a:this.excPtr}}function Ea(a){L||(L=a);throw a}function Fa(){var a=L;if(!a){X(0);return 0}var b=new Da(a);b.set_adjusted_ptr(a);var c=b.get_type();if(!c){X(0);return a}for(var d=0;d<arguments.length;d++){var e=arguments[d];if(e===0||e===c)break;var f=b.ptr+16;if(jb(e,c,f)){X(e);return a}}X(c);return a}var Ga=0;function Ha(a,b,c){var d=new Da(a);d.init(b,c);L=a;Ga++;throw a}var M={isAbs:function(a){return a.charAt(0)==="/"},splitPath:function(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(a).slice(1)},normalizeArray:function(a,b){var c=0;for(var d=a.length-1;d>=0;d--){var e=a[d];e==="."?a.splice(d,1):e===".."?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b=M.isAbs(a),c=a.substr(-1)==="/";a=M.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");!a&&!b&&(a=".");a&&c&&(a+="/");return(b?"/":"")+a},dirname:function(a){a=M.splitPath(a);var b=a[0];a=a[1];if(!b&&!a)return".";a&&(a=a.substr(0,a.length-1));return b+a},basename:function(a){if(a==="/")return"/";a=M.normalize(a);a=a.replace(/\/$/,"");var b=a.lastIndexOf("/");return b===-1?a:a.substr(b+1)},join:function(){var a=Array.prototype.slice.call(arguments);return M.normalize(a.join("/"))},join2:function(a,b){return M.normalize(a+"/"+b)}};function Ia(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var a=new Uint8Array(1);return function(){crypto.getRandomValues(a);return a[0]}}else return function(){return H("randomDevice")}}var N={resolve:function(){var a="",b=!1;for(var c=arguments.length-1;c>=-1&&!b;c--){var d=c>=0?arguments[c]:Q.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");else if(!d)return"";a=d+"/"+a;b=M.isAbs(d)}a=M.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");return(b?"/":"")+a||"."},relative:function(a,b){a=N.resolve(a).substr(1);b=N.resolve(b).substr(1);function c(a){var b=0;for(;b<a.length;b++)if(a[b]!=="")break;var c=a.length-1;for(;c>=0;c--)if(a[c]!=="")break;return b>c?[]:a.slice(b,c-b+1)}a=c(a.split("/"));c=c(b.split("/"));b=Math.min(a.length,c.length);var d=b;for(var e=0;e<b;e++)if(a[e]!==c[e]){d=e;break}b=[];for(var e=d;e<a.length;e++)b.push("..");b=b.concat(c.slice(d));return b.join("/")}};function Ja(a,b,c){c=c>0?c:z(a)+1;c=new Array(c);a=y(a,c,0,c.length);b&&(c.length=a);return c}var O={ttys:[],init:function(){},shutdown:function(){},register:function(a,b){O.ttys[a]={input:[],output:[],ops:b},Q.registerDevice(a,O.stream_ops)},stream_ops:{open:function(a){var b=O.ttys[a.node.rdev];if(!b)throw new Q.ErrnoError(43);a.tty=b;a.seekable=!1},close:function(a){a.tty.ops.fsync(a.tty)},fsync:function(a){a.tty.ops.fsync(a.tty)},read:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.get_char)throw new Q.ErrnoError(60);e=0;for(var f=0;f<d;f++){var g;try{g=b.tty.ops.get_char(b.tty)}catch(a){throw new Q.ErrnoError(29)}if(g===void 0&&e===0)throw new Q.ErrnoError(6);if(g===null||g===void 0)break;e++;a[c+f]=g}e&&(b.node.timestamp=Date.now());return e},write:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.put_char)throw new Q.ErrnoError(60);try{for(var f=0;f<d;f++)b.tty.ops.put_char(b.tty,a[c+f])}catch(a){throw new Q.ErrnoError(29)}d&&(b.node.timestamp=Date.now());return f}},default_tty_ops:{get_char:function(a){if(!a.input.length){var b=null;typeof window!="undefined"&&typeof window.prompt=="function"?(b=window.prompt("Input: "),b!==null&&(b+="\n")):typeof readline=="function"&&(b=readline(),b!==null&&(b+="\n"));if(!b)return null;a.input=Ja(b,!0)}return a.input.shift()},put_char:function(a,b){b===null||b===10?(s(x(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},fsync:function(a){a.output&&a.output.length>0&&(s(x(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(a,b){b===null||b===10?(t(x(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},fsync:function(a){a.output&&a.output.length>0&&(t(x(a.output,0)),a.output=[])}}};function Ka(a){H()}var P={ops_table:null,mount:function(a){return P.createNode(null,"/",16384|511,0)},createNode:function(a,b,c,d){if(Q.isBlkdev(c)||Q.isFIFO(c))throw new Q.ErrnoError(63);P.ops_table||(P.ops_table={dir:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr,lookup:P.node_ops.lookup,mknod:P.node_ops.mknod,rename:P.node_ops.rename,unlink:P.node_ops.unlink,rmdir:P.node_ops.rmdir,readdir:P.node_ops.readdir,symlink:P.node_ops.symlink},stream:{llseek:P.stream_ops.llseek}},file:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr},stream:{llseek:P.stream_ops.llseek,read:P.stream_ops.read,write:P.stream_ops.write,allocate:P.stream_ops.allocate,mmap:P.stream_ops.mmap,msync:P.stream_ops.msync}},link:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr,readlink:P.node_ops.readlink},stream:{}},chrdev:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr},stream:Q.chrdev_stream_ops}});c=Q.createNode(a,b,c,d);Q.isDir(c.mode)?(c.node_ops=P.ops_table.dir.node,c.stream_ops=P.ops_table.dir.stream,c.contents={}):Q.isFile(c.mode)?(c.node_ops=P.ops_table.file.node,c.stream_ops=P.ops_table.file.stream,c.usedBytes=0,c.contents=null):Q.isLink(c.mode)?(c.node_ops=P.ops_table.link.node,c.stream_ops=P.ops_table.link.stream):Q.isChrdev(c.mode)&&(c.node_ops=P.ops_table.chrdev.node,c.stream_ops=P.ops_table.chrdev.stream);c.timestamp=Date.now();a&&(a.contents[b]=c,a.timestamp=c.timestamp);return c},getFileDataAsTypedArray:function(a){if(!a.contents)return new Uint8Array(0);return a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents)},expandFileStorage:function(a,b){var c=a.contents?a.contents.length:0;if(c>=b)return;var d=1024*1024;b=Math.max(b,c*(c<d?2:1.125)>>>0);c!=0&&(b=Math.max(b,256));d=a.contents;a.contents=new Uint8Array(b);a.usedBytes>0&&a.contents.set(d.subarray(0,a.usedBytes),0)},resizeFileStorage:function(a,b){if(a.usedBytes==b)return;if(b==0)a.contents=null,a.usedBytes=0;else{var c=a.contents;a.contents=new Uint8Array(b);c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes)));a.usedBytes=b}},node_ops:{getattr:function(a){var b={};b.dev=Q.isChrdev(a.mode)?a.id:1;b.ino=a.id;b.mode=a.mode;b.nlink=1;b.uid=0;b.gid=0;b.rdev=a.rdev;Q.isDir(a.mode)?b.size=4096:Q.isFile(a.mode)?b.size=a.usedBytes:Q.isLink(a.mode)?b.size=a.link.length:b.size=0;b.atime=new Date(a.timestamp);b.mtime=new Date(a.timestamp);b.ctime=new Date(a.timestamp);b.blksize=4096;b.blocks=Math.ceil(b.size/b.blksize);return b},setattr:function(a,b){b.mode!==void 0&&(a.mode=b.mode),b.timestamp!==void 0&&(a.timestamp=b.timestamp),b.size!==void 0&&P.resizeFileStorage(a,b.size)},lookup:function(a,b){throw Q.genericErrors[44]},mknod:function(a,b,c,d){return P.createNode(a,b,c,d)},rename:function(a,b,c){if(Q.isDir(a.mode)){var d;try{d=Q.lookupNode(b,c)}catch(a){}if(d)for(var e in d.contents)throw new Q.ErrnoError(55)}delete a.parent.contents[a.name];a.parent.timestamp=Date.now();a.name=c;b.contents[c]=a;b.timestamp=a.parent.timestamp;a.parent=b},unlink:function(a,b){delete a.contents[b],a.timestamp=Date.now()},rmdir:function(a,b){var c=Q.lookupNode(a,b);for(c in c.contents)throw new Q.ErrnoError(55);delete a.contents[b];a.timestamp=Date.now()},readdir:function(a){var b=[".",".."];for(var c in a.contents){if(!Object.prototype.hasOwnProperty.call(a.contents,c))continue;b.push(c)}return b},symlink:function(a,b,c){a=P.createNode(a,b,511|40960,0);a.link=c;return a},readlink:function(a){if(!Q.isLink(a.mode))throw new Q.ErrnoError(28);return a.link}},stream_ops:{read:function(b,a,c,d,e){var f=b.node.contents;if(e>=b.node.usedBytes)return 0;b=Math.min(b.node.usedBytes-e,d);if(b>8&&f.subarray)a.set(f.subarray(e,e+b),c);else for(d=0;d<b;d++)a[c+d]=f[e+d];return b},write:function(b,a,c,d,e,f){a.buffer===A.buffer&&(f=!1);if(!d)return 0;b=b.node;b.timestamp=Date.now();if(a.subarray&&(!b.contents||b.contents.subarray))if(f){b.contents=a.subarray(c,c+d);b.usedBytes=d;return d}else if(b.usedBytes===0&&e===0){b.contents=a.slice(c,c+d);b.usedBytes=d;return d}else if(e+d<=b.usedBytes){b.contents.set(a.subarray(c,c+d),e);return d}P.expandFileStorage(b,e+d);if(b.contents.subarray&&a.subarray)b.contents.set(a.subarray(c,c+d),e);else for(f=0;f<d;f++)b.contents[e+f]=a[c+f];b.usedBytes=Math.max(b.usedBytes,e+d);return d},llseek:function(a,b,c){b=b;c===1?b+=a.position:c===2&&(Q.isFile(a.node.mode)&&(b+=a.node.usedBytes));if(b<0)throw new Q.ErrnoError(28);return b},allocate:function(a,b,c){P.expandFileStorage(a.node,b+c),a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(a,b,c,d,e){if(!Q.isFile(a.node.mode))throw new Q.ErrnoError(43);d=a.node.contents;if(!(e&2)&&d.buffer===ha)a=!1,e=d.byteOffset;else{(c>0||c+b<d.length)&&(d.subarray?d=d.subarray(c,c+b):d=Array.prototype.slice.call(d,c,c+b));a=!0;e=Ka(b);if(!e)throw new Q.ErrnoError(48);A.set(d,e)}return{ptr:e,allocated:a}},msync:function(b,a,c,d,e){P.stream_ops.write(b,a,0,d,c,!1);return 0}}};function La(a,b,c,d){var e=d?"":ta("al "+a);ba(a,function(c){da(c,'Loading data file "'+a+'" failed (no arrayBuffer).'),b(new Uint8Array(c)),e&&G(e)},function(b){if(c)c();else throw'Loading data file "'+a+'" failed.'});e&&ua(e)}var Q={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(a,b){b===void 0&&(b={});a=N.resolve(a);if(!a)return{path:"",node:null};var c={follow_mount:!0,recurse_count:0};b=Object.assign(c,b);if(b.recurse_count>8)throw new Q.ErrnoError(32);c=a.split("/").filter(function(a){return!!a});a=Q.root;var d="/";for(var e=0;e<c.length;e++){var f=e===c.length-1;if(f&&b.parent)break;a=Q.lookupNode(a,c[e]);d=M.join2(d,c[e]);Q.isMountpoint(a)&&((!f||f&&b.follow_mount)&&(a=a.mounted.root));if(!f||b.follow){f=0;while(Q.isLink(a.mode)){var g=Q.readlink(d);d=N.resolve(M.dirname(d),g);g=Q.lookupPath(d,{recurse_count:b.recurse_count+1});a=g.node;if(f++>40)throw new Q.ErrnoError(32)}}}return{path:d,node:a}},getPath:function(a){var b;while(!0){if(Q.isRoot(a)){var c=a.mount.mountpoint;return!b?c:c[c.length-1]!=="/"?c+"/"+b:c+b}b=b?a.name+"/"+b:a.name;a=a.parent}},hashName:function(a,b){var c=0;for(var d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%Q.nameTable.length},hashAddNode:function(a){var b=Q.hashName(a.parent.id,a.name);a.name_next=Q.nameTable[b];Q.nameTable[b]=a},hashRemoveNode:function(a){var b=Q.hashName(a.parent.id,a.name);if(Q.nameTable[b]===a)Q.nameTable[b]=a.name_next;else{b=Q.nameTable[b];while(b){if(b.name_next===a){b.name_next=a.name_next;break}b=b.name_next}}},lookupNode:function(a,b){var c=Q.mayLookup(a);if(c)throw new Q.ErrnoError(c,a);c=Q.hashName(a.id,b);for(c=Q.nameTable[c];c;c=c.name_next){var d=c.name;if(c.parent.id===a.id&&d===b)return c}return Q.lookup(a,b)},createNode:function(a,b,c,d){a=new Q.FSNode(a,b,c,d);Q.hashAddNode(a);return a},destroyNode:function(a){Q.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return(a&61440)===32768},isDir:function(a){return(a&61440)===16384},isLink:function(a){return(a&61440)===40960},isChrdev:function(a){return(a&61440)===8192},isBlkdev:function(a){return(a&61440)===24576},isFIFO:function(a){return(a&61440)===4096},isSocket:function(a){return(a&49152)===49152},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(a){var b=Q.flagModes[a];if(typeof b=="undefined")throw new Error("Unknown file open mode: "+a);return b},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];a&512&&(b+="w");return b},nodePermissions:function(a,b){if(Q.ignorePermissions)return 0;if(b.includes("r")&&!(a.mode&292))return 2;else if(b.includes("w")&&!(a.mode&146))return 2;else if(b.includes("x")&&!(a.mode&73))return 2;return 0},mayLookup:function(a){var b=Q.nodePermissions(a,"x");if(b)return b;return!a.node_ops.lookup?2:0},mayCreate:function(a,b){try{Q.lookupNode(a,b);return 20}catch(a){}return Q.nodePermissions(a,"wx")},mayDelete:function(a,b,c){var d;try{d=Q.lookupNode(a,b)}catch(a){return a.errno}b=Q.nodePermissions(a,"wx");if(b)return b;if(c){if(!Q.isDir(d.mode))return 54;if(Q.isRoot(d)||Q.getPath(d)===Q.cwd())return 10}else if(Q.isDir(d.mode))return 31;return 0},mayOpen:function(a,b){if(!a)return 44;if(Q.isLink(a.mode))return 32;else if(Q.isDir(a.mode)&&(Q.flagsToPermissionString(b)!=="r"||b&512))return 31;return Q.nodePermissions(a,Q.flagsToPermissionString(b))},MAX_OPEN_FDS:4096,nextfd:function(a,b){a===void 0&&(a=0);b===void 0&&(b=Q.MAX_OPEN_FDS);for(a=a;a<=b;a++)if(!Q.streams[a])return a;throw new Q.ErrnoError(33)},getStream:function(a){return Q.streams[a]},createStream:function(a,b,c){Q.FSStream||(Q.FSStream=function(){this.shared={}},Q.FSStream.prototype={},Object.defineProperties(Q.FSStream.prototype,{object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(a){this.shared.flags=a}},position:{get:function(){return this.shared.position},set:function(a){this.shared.position=a}}}));a=Object.assign(new Q.FSStream(),a);b=Q.nextfd(b,c);a.fd=b;Q.streams[b]=a;return a},closeStream:function(a){Q.streams[a]=null},chrdev_stream_ops:{open:function(a){var b=Q.getDevice(a.node.rdev);a.stream_ops=b.stream_ops;a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new Q.ErrnoError(70)}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,b){Q.devices[a]={stream_ops:b}},getDevice:function(a){return Q.devices[a]},getMounts:function(a){var b=[];a=[a];while(a.length){var c=a.pop();b.push(c);a.push.apply(a,c.mounts)}return b},syncfs:function(a,b){typeof a=="function"&&(b=a,a=!1);Q.syncFSRequests++;Q.syncFSRequests>1&&t("warning: "+Q.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var c=Q.getMounts(Q.root.mount),d=0;function e(a){Q.syncFSRequests--;return b(a)}function f(a){if(a){if(!f.errored){f.errored=!0;return e(a)}return}++d>=c.length&&e(null)}c.forEach(function(b){if(!b.type.syncfs)return f(null);b.type.syncfs(b,a,f)})},mount:function(a,b,c){var d=c==="/",e=!c,f;if(d&&Q.root)throw new Q.ErrnoError(10);else if(!d&&!e){e=Q.lookupPath(c,{follow_mount:!1});c=e.path;f=e.node;if(Q.isMountpoint(f))throw new Q.ErrnoError(10);if(!Q.isDir(f.mode))throw new Q.ErrnoError(54)}e={type:a,opts:b,mountpoint:c,mounts:[]};b=a.mount(e);b.mount=e;e.root=b;d?Q.root=b:f&&(f.mounted=e,f.mount&&f.mount.mounts.push(e));return b},unmount:function(a){a=Q.lookupPath(a,{follow_mount:!1});if(!Q.isMountpoint(a.node))throw new Q.ErrnoError(28);a=a.node;var b=a.mounted,c=Q.getMounts(b);Object.keys(Q.nameTable).forEach(function(a){a=Q.nameTable[a];while(a){var b=a.name_next;c.includes(a.mount)&&Q.destroyNode(a);a=b}});a.mounted=null;b=a.mount.mounts.indexOf(b);a.mount.mounts.splice(b,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(a,b,c){var d=Q.lookupPath(a,{parent:!0});d=d.node;a=M.basename(a);if(!a||a==="."||a==="..")throw new Q.ErrnoError(28);var e=Q.mayCreate(d,a);if(e)throw new Q.ErrnoError(e);if(!d.node_ops.mknod)throw new Q.ErrnoError(63);return d.node_ops.mknod(d,a,b,c)},create:function(a,b){b=b!==void 0?b:438;b&=4095;b|=32768;return Q.mknod(a,b,0)},mkdir:function(a,b){b=b!==void 0?b:511;b&=511|512;b|=16384;return Q.mknod(a,b,0)},mkdirTree:function(a,b){a=a.split("/");var c="";for(var d=0;d<a.length;++d){if(!a[d])continue;c+="/"+a[d];try{Q.mkdir(c,b)}catch(a){if(a.errno!=20)throw a}}},mkdev:function(a,b,c){typeof c=="undefined"&&(c=b,b=438);b|=8192;return Q.mknod(a,b,c)},symlink:function(a,b){if(!N.resolve(a))throw new Q.ErrnoError(44);var c=Q.lookupPath(b,{parent:!0});c=c.node;if(!c)throw new Q.ErrnoError(44);b=M.basename(b);var d=Q.mayCreate(c,b);if(d)throw new Q.ErrnoError(d);if(!c.node_ops.symlink)throw new Q.ErrnoError(63);return c.node_ops.symlink(c,b,a)},rename:function(a,b){var c=M.dirname(a),d=M.dirname(b),e=M.basename(a),f=M.basename(b),g,h;g=Q.lookupPath(a,{parent:!0});h=g.node;g=Q.lookupPath(b,{parent:!0});g=g.node;if(!h||!g)throw new Q.ErrnoError(44);if(h.mount!==g.mount)throw new Q.ErrnoError(75);var i=Q.lookupNode(h,e);a=N.relative(a,d);if(a.charAt(0)!==".")throw new Q.ErrnoError(28);a=N.relative(b,c);if(a.charAt(0)!==".")throw new Q.ErrnoError(55);var j;try{j=Q.lookupNode(g,f)}catch(a){}if(i===j)return;d=Q.isDir(i.mode);b=Q.mayDelete(h,e,d);if(b)throw new Q.ErrnoError(b);b=j?Q.mayDelete(g,f,d):Q.mayCreate(g,f);if(b)throw new Q.ErrnoError(b);if(!h.node_ops.rename)throw new Q.ErrnoError(63);if(Q.isMountpoint(i)||j&&Q.isMountpoint(j))throw new Q.ErrnoError(10);if(g!==h){b=Q.nodePermissions(h,"w");if(b)throw new Q.ErrnoError(b)}Q.hashRemoveNode(i);try{h.node_ops.rename(i,g,f)}catch(a){throw a}finally{Q.hashAddNode(i)}},rmdir:function(a){var b=Q.lookupPath(a,{parent:!0});b=b.node;a=M.basename(a);var c=Q.lookupNode(b,a),d=Q.mayDelete(b,a,!0);if(d)throw new Q.ErrnoError(d);if(!b.node_ops.rmdir)throw new Q.ErrnoError(63);if(Q.isMountpoint(c))throw new Q.ErrnoError(10);b.node_ops.rmdir(b,a);Q.destroyNode(c)},readdir:function(a){a=Q.lookupPath(a,{follow:!0});a=a.node;if(!a.node_ops.readdir)throw new Q.ErrnoError(54);return a.node_ops.readdir(a)},unlink:function(a){var b=Q.lookupPath(a,{parent:!0});b=b.node;if(!b)throw new Q.ErrnoError(44);a=M.basename(a);var c=Q.lookupNode(b,a),d=Q.mayDelete(b,a,!1);if(d)throw new Q.ErrnoError(d);if(!b.node_ops.unlink)throw new Q.ErrnoError(63);if(Q.isMountpoint(c))throw new Q.ErrnoError(10);b.node_ops.unlink(b,a);Q.destroyNode(c)},readlink:function(a){a=Q.lookupPath(a);a=a.node;if(!a)throw new Q.ErrnoError(44);if(!a.node_ops.readlink)throw new Q.ErrnoError(28);return N.resolve(Q.getPath(a.parent),a.node_ops.readlink(a))},stat:function(a,b){a=Q.lookupPath(a,{follow:!b});b=a.node;if(!b)throw new Q.ErrnoError(44);if(!b.node_ops.getattr)throw new Q.ErrnoError(63);return b.node_ops.getattr(b)},lstat:function(a){return Q.stat(a,!0)},chmod:function(a,b,c){if(typeof a=="string"){c=Q.lookupPath(a,{follow:!c});c=c.node}else c=a;if(!c.node_ops.setattr)throw new Q.ErrnoError(63);c.node_ops.setattr(c,{mode:b&4095|c.mode&-4096,timestamp:Date.now()})},lchmod:function(a,b){Q.chmod(a,b,!0)},fchmod:function(a,b){a=Q.getStream(a);if(!a)throw new Q.ErrnoError(8);Q.chmod(a.node,b)},chown:function(a,b,c,d){if(typeof a=="string"){b=Q.lookupPath(a,{follow:!d});c=b.node}else c=a;if(!c.node_ops.setattr)throw new Q.ErrnoError(63);c.node_ops.setattr(c,{timestamp:Date.now()})},lchown:function(a,b,c){Q.chown(a,b,c,!0)},fchown:function(a,b,c){a=Q.getStream(a);if(!a)throw new Q.ErrnoError(8);Q.chown(a.node,b,c)},truncate:function(a,b){if(b<0)throw new Q.ErrnoError(28);if(typeof a=="string"){var c=Q.lookupPath(a,{follow:!0});c=c.node}else c=a;if(!c.node_ops.setattr)throw new Q.ErrnoError(63);if(Q.isDir(c.mode))throw new Q.ErrnoError(31);if(!Q.isFile(c.mode))throw new Q.ErrnoError(28);a=Q.nodePermissions(c,"w");if(a)throw new Q.ErrnoError(a);c.node_ops.setattr(c,{size:b,timestamp:Date.now()})},ftruncate:function(a,b){a=Q.getStream(a);if(!a)throw new Q.ErrnoError(8);if((a.flags&2097155)===0)throw new Q.ErrnoError(28);Q.truncate(a.node,b)},utime:function(a,b,c){a=Q.lookupPath(a,{follow:!0});a=a.node;a.node_ops.setattr(a,{timestamp:Math.max(b,c)})},open:function(a,b,d){if(a==="")throw new Q.ErrnoError(44);b=typeof b=="string"?Q.modeStringToFlags(b):b;d=typeof d=="undefined"?438:d;b&64?d=d&4095|32768:d=0;var e;if(typeof a=="object")e=a;else{a=M.normalize(a);try{var f=Q.lookupPath(a,{follow:!(b&131072)});e=f.node}catch(a){}}f=!1;if(b&64)if(e){if(b&128)throw new Q.ErrnoError(20)}else e=Q.mknod(a,d,0),f=!0;if(!e)throw new Q.ErrnoError(44);Q.isChrdev(e.mode)&&(b&=-513);if(b&65536&&!Q.isDir(e.mode))throw new Q.ErrnoError(54);if(!f){d=Q.mayOpen(e,b);if(d)throw new Q.ErrnoError(d)}b&512&&!f&&Q.truncate(e,0);b&=~(128|512|131072);d=Q.createStream({node:e,path:Q.getPath(e),flags:b,seekable:!0,position:0,stream_ops:e.stream_ops,ungotten:[],error:!1});d.stream_ops.open&&d.stream_ops.open(d);c.logReadFiles&&!(b&1)&&(Q.readFiles||(Q.readFiles={}),a in Q.readFiles||(Q.readFiles[a]=1));return d},close:function(a){if(Q.isClosed(a))throw new Q.ErrnoError(8);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(a){throw a}finally{Q.closeStream(a.fd)}a.fd=null},isClosed:function(a){return a.fd===null},llseek:function(a,b,c){if(Q.isClosed(a))throw new Q.ErrnoError(8);if(!a.seekable||!a.stream_ops.llseek)throw new Q.ErrnoError(70);if(c!=0&&c!=1&&c!=2)throw new Q.ErrnoError(28);a.position=a.stream_ops.llseek(a,b,c);a.ungotten=[];return a.position},read:function(b,a,c,d,e){if(d<0||e<0)throw new Q.ErrnoError(28);if(Q.isClosed(b))throw new Q.ErrnoError(8);if((b.flags&2097155)===1)throw new Q.ErrnoError(8);if(Q.isDir(b.node.mode))throw new Q.ErrnoError(31);if(!b.stream_ops.read)throw new Q.ErrnoError(28);var f=typeof e!="undefined";if(!f)e=b.position;else if(!b.seekable)throw new Q.ErrnoError(70);a=b.stream_ops.read(b,a,c,d,e);f||(b.position+=a);return a},write:function(b,a,c,d,e,f){if(d<0||e<0)throw new Q.ErrnoError(28);if(Q.isClosed(b))throw new Q.ErrnoError(8);if((b.flags&2097155)===0)throw new Q.ErrnoError(8);if(Q.isDir(b.node.mode))throw new Q.ErrnoError(31);if(!b.stream_ops.write)throw new Q.ErrnoError(28);b.seekable&&b.flags&1024&&Q.llseek(b,0,2);var g=typeof e!="undefined";if(!g)e=b.position;else if(!b.seekable)throw new Q.ErrnoError(70);a=b.stream_ops.write(b,a,c,d,e,f);g||(b.position+=a);return a},allocate:function(a,b,c){if(Q.isClosed(a))throw new Q.ErrnoError(8);if(b<0||c<=0)throw new Q.ErrnoError(28);if((a.flags&2097155)===0)throw new Q.ErrnoError(8);if(!Q.isFile(a.node.mode)&&!Q.isDir(a.node.mode))throw new Q.ErrnoError(43);if(!a.stream_ops.allocate)throw new Q.ErrnoError(138);a.stream_ops.allocate(a,b,c)},mmap:function(a,b,c,d,e){if((d&2)!==0&&(e&2)===0&&(a.flags&2097155)!==2)throw new Q.ErrnoError(2);if((a.flags&2097155)===1)throw new Q.ErrnoError(2);if(!a.stream_ops.mmap)throw new Q.ErrnoError(43);return a.stream_ops.mmap(a,b,c,d,e)},msync:function(b,a,c,d,e){return!b.stream_ops.msync?0:b.stream_ops.msync(b,a,c,d,e)},munmap:function(a){return 0},ioctl:function(a,b,c){if(!a.stream_ops.ioctl)throw new Q.ErrnoError(59);return a.stream_ops.ioctl(a,b,c)},readFile:function(a,b){b===void 0&&(b={});b.flags=b.flags||0;b.encoding=b.encoding||"binary";if(b.encoding!=="utf8"&&b.encoding!=="binary")throw new Error('Invalid encoding type "'+b.encoding+'"');var c,d=Q.open(a,b.flags);a=Q.stat(a);a=a.size;var e=new Uint8Array(a);Q.read(d,e,0,a,0);b.encoding==="utf8"?c=x(e,0):b.encoding==="binary"&&(c=e);Q.close(d);return c},writeFile:function(a,b,c){c===void 0&&(c={});c.flags=c.flags||577;a=Q.open(a,c.flags,c.mode);if(typeof b=="string"){var d=new Uint8Array(z(b)+1),e=y(b,d,0,d.length);Q.write(a,d,0,e,void 0,c.canOwn)}else if(ArrayBuffer.isView(b))Q.write(a,b,0,b.byteLength,void 0,c.canOwn);else throw new Error("Unsupported data type");Q.close(a)},cwd:function(){return Q.currentPath},chdir:function(a){a=Q.lookupPath(a,{follow:!0});if(a.node===null)throw new Q.ErrnoError(44);if(!Q.isDir(a.node.mode))throw new Q.ErrnoError(54);var b=Q.nodePermissions(a.node,"x");if(b)throw new Q.ErrnoError(b);Q.currentPath=a.path},createDefaultDirectories:function(){Q.mkdir("/tmp"),Q.mkdir("/home"),Q.mkdir("/home/web_user")},createDefaultDevices:function(){Q.mkdir("/dev");Q.registerDevice(Q.makedev(1,3),{read:function(){return 0},write:function(b,a,c,d,e){return d}});Q.mkdev("/dev/null",Q.makedev(1,3));O.register(Q.makedev(5,0),O.default_tty_ops);O.register(Q.makedev(6,0),O.default_tty1_ops);Q.mkdev("/dev/tty",Q.makedev(5,0));Q.mkdev("/dev/tty1",Q.makedev(6,0));var a=Ia();Q.createDevice("/dev","random",a);Q.createDevice("/dev","urandom",a);Q.mkdir("/dev/shm");Q.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Q.mkdir("/proc");var a=Q.mkdir("/proc/self");Q.mkdir("/proc/self/fd");Q.mount({mount:function(){var b=Q.createNode(a,"fd",16384|511,73);b.node_ops={lookup:function(a,b){a=+b;var c=Q.getStream(a);if(!c)throw new Q.ErrnoError(8);b={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return c.path}}};b.parent=b;return b}};return b}},{},"/proc/self/fd")},createStandardStreams:function(){c.stdin?Q.createDevice("/dev","stdin",c.stdin):Q.symlink("/dev/tty","/dev/stdin"),c.stdout?Q.createDevice("/dev","stdout",null,c.stdout):Q.symlink("/dev/tty","/dev/stdout"),c.stderr?Q.createDevice("/dev","stderr",null,c.stderr):Q.symlink("/dev/tty1","/dev/stderr"),Q.open("/dev/stdin",0),Q.open("/dev/stdout",1),Q.open("/dev/stderr",1)},ensureErrnoError:function(){if(Q.ErrnoError)return;Q.ErrnoError=function(a,b){this.node=b,this.setErrno=function(a){this.errno=a},this.setErrno(a),this.message="FS error"};Q.ErrnoError.prototype=new Error();Q.ErrnoError.prototype.constructor=Q.ErrnoError;[44].forEach(function(a){Q.genericErrors[a]=new Q.ErrnoError(a),Q.genericErrors[a].stack="<generic error, no stack>"})},staticInit:function(){Q.ensureErrnoError(),Q.nameTable=new Array(4096),Q.mount(P,{},"/"),Q.createDefaultDirectories(),Q.createDefaultDevices(),Q.createSpecialDirectories(),Q.filesystems={MEMFS:P}},init:function(a,b,d){Q.init.initialized=!0,Q.ensureErrnoError(),c.stdin=a||c.stdin,c.stdout=b||c.stdout,c.stderr=d||c.stderr,Q.createStandardStreams()},quit:function(){Q.init.initialized=!1;for(var a=0;a<Q.streams.length;a++){var b=Q.streams[a];if(!b)continue;Q.close(b)}},getMode:function(a,b){var c=0;a&&(c|=292|73);b&&(c|=146);return c},findObject:function(a,b){a=Q.analyzePath(a,b);return!a.exists?null:a.object},analyzePath:function(a,b){try{var c=Q.lookupPath(a,{follow:!b});a=c.path}catch(a){}var d={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var c=Q.lookupPath(a,{parent:!0});d.parentExists=!0;d.parentPath=c.path;d.parentObject=c.node;d.name=M.basename(a);c=Q.lookupPath(a,{follow:!b});d.exists=!0;d.path=c.path;d.object=c.node;d.name=c.node.name;d.isRoot=c.path==="/"}catch(a){d.error=a.errno}return d},createPath:function(a,b,c,d){a=typeof a=="string"?a:Q.getPath(a);c=b.split("/").reverse();while(c.length){d=c.pop();if(!d)continue;var e=M.join2(a,d);try{Q.mkdir(e)}catch(a){}a=e}return e},createFile:function(a,b,c,d,e){c=M.join2(typeof a=="string"?a:Q.getPath(a),b);a=Q.getMode(d,e);return Q.create(c,a)},createDataFile:function(a,b,c,d,e,f){var g=b;a&&(a=typeof a=="string"?a:Q.getPath(a),g=b?M.join2(a,b):a);b=Q.getMode(d,e);a=Q.create(g,b);if(c){if(typeof c=="string"){d=new Array(c.length);for(e=0,g=c.length;e<g;++e)d[e]=c.charCodeAt(e);c=d}Q.chmod(a,b|146);e=Q.open(a,577);Q.write(e,c,0,c.length,0,f);Q.close(e);Q.chmod(a,b)}return a},createDevice:function(a,b,c,d){a=M.join2(typeof a=="string"?a:Q.getPath(a),b);b=Q.getMode(!!c,!!d);Q.createDevice.major||(Q.createDevice.major=64);var e=Q.makedev(Q.createDevice.major++,0);Q.registerDevice(e,{open:function(a){a.seekable=!1},close:function(a){d&&d.buffer&&d.buffer.length&&d(10)},read:function(b,a,d,e,f){f=0;for(var g=0;g<e;g++){var h;try{h=c()}catch(a){throw new Q.ErrnoError(29)}if(h===void 0&&f===0)throw new Q.ErrnoError(6);if(h===null||h===void 0)break;f++;a[d+g]=h}f&&(b.node.timestamp=Date.now());return f},write:function(b,a,c,e,f){for(f=0;f<e;f++)try{d(a[c+f])}catch(a){throw new Q.ErrnoError(29)}e&&(b.node.timestamp=Date.now());return f}});return Q.mkdev(a,b,e)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else if(q)try{a.contents=Ja(q(a.url),!0),a.usedBytes=a.contents.length}catch(a){throw new Q.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:function(a,b,c,d,e){function f(){this.lengthKnown=!1,this.chunks=[]}f.prototype.get=function(a){if(a>this.length-1||a<0)return void 0;var b=a%this.chunkSize;a=a/this.chunkSize|0;return this.getter(a)[b]};f.prototype.setDataGetter=function(a){this.getter=a};f.prototype.cacheLength=function(){var a=new XMLHttpRequest();a.open("HEAD",c,!1);a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);var b=Number(a.getResponseHeader("Content-length")),d,e=(d=a.getResponseHeader("Accept-Ranges"))&&d==="bytes";a=(d=a.getResponseHeader("Content-Encoding"))&&d==="gzip";var f=1024*1024;e||(f=b);var g=function(d,e){if(d>e)throw new Error("invalid range ("+d+", "+e+") or no bytes requested!");if(e>b-1)throw new Error("only "+b+" bytes available! programmer error!");var a=new XMLHttpRequest();a.open("GET",c,!1);b!==f&&a.setRequestHeader("Range","bytes="+d+"-"+e);a.responseType="arraybuffer";a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined");a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);return a.response!==void 0?new Uint8Array(a.response||[]):Ja(a.responseText||"",!0)},h=this;h.setDataGetter(function(a){var c=a*f,d=(a+1)*f-1;d=Math.min(d,b-1);typeof h.chunks[a]=="undefined"&&(h.chunks[a]=g(c,d));if(typeof h.chunks[a]=="undefined")throw new Error("doXHR failed!");return h.chunks[a]});(a||!b)&&(f=b=1,b=this.getter(0).length,f=b,s("LazyFiles on gzip forces download of the whole file when length is accessed"));this._length=b;this._chunkSize=f;this.lengthKnown=!0};if(typeof XMLHttpRequest!="undefined"){if(!n)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";f=new f();Object.defineProperties(f,{length:{get:function(){this.lengthKnown||this.cacheLength();return this._length}},chunkSize:{get:function(){this.lengthKnown||this.cacheLength();return this._chunkSize}}});f={isDevice:!1,contents:f}}else var f={isDevice:!1,url:c};var g=Q.createFile(a,b,f,d,e);f.contents?g.contents=f.contents:f.url&&(g.contents=null,g.url=f.url);Object.defineProperties(g,{usedBytes:{get:function(){return this.contents.length}}});var h={};a=Object.keys(g.stream_ops);a.forEach(function(a){var b=g.stream_ops[a];h[a]=function(){Q.forceLoadFile(g);return b.apply(null,arguments)}});function i(b,a,c,d,e){b=b.node.contents;if(e>=b.length)return 0;d=Math.min(b.length-e,d);if(b.slice)for(var f=0;f<d;f++)a[c+f]=b[e+f];else for(var f=0;f<d;f++)a[c+f]=b.get(e+f);return d}h.read=function(b,a,c,d,e){Q.forceLoadFile(g);return i(b,a,c,d,e)};h.mmap=function(a,b,c,d,e){Q.forceLoadFile(g);d=Ka(b);if(!d)throw new Q.ErrnoError(48);i(a,A,d,b,c);return{ptr:d,allocated:!0}};g.stream_ops=h;return g},createPreloadedFile:function(a,b,c,d,e,f,g,h,i,j){var k=b?N.resolve(M.join2(a,b)):a,l=ta("cp "+k);function m(c){function m(c){j&&j(),h||Q.createDataFile(a,b,c,d,e,i),f&&f(),G(l)}if(Browser.handledByPreloadPlugin(c,k,m,function(){g&&g(),G(l)}))return;m(c)}ua(l);typeof c=="string"?La(c,function(a){return m(a)},g):m(c)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=Q.indexedDB();try{var e=d.open(Q.DB_NAME(),Q.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=function(){s("creating db");var a=e.result;a.createObjectStore(Q.DB_STORE_NAME)};e.onsuccess=function(){var d=e.result;d=d.transaction([Q.DB_STORE_NAME],"readwrite");var f=d.objectStore(Q.DB_STORE_NAME),g=0,h=0,i=a.length;function j(){h==0?b():c()}a.forEach(function(a){a=f.put(Q.analyzePath(a).object.contents,a);a.onsuccess=function(){g++,g+h==i&&j()};a.onerror=function(){h++,g+h==i&&j()}});d.onerror=c};e.onerror=c},loadFilesFromDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=Q.indexedDB();try{var e=d.open(Q.DB_NAME(),Q.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=c;e.onsuccess=function(){var d=e.result;try{var f=d.transaction([Q.DB_STORE_NAME],"readonly")}catch(a){c(a);return}var g=f.objectStore(Q.DB_STORE_NAME),h=0,i=0,j=a.length;function k(){i==0?b():c()}a.forEach(function(a){var b=g.get(a);b.onsuccess=function(){Q.analyzePath(a).exists&&Q.unlink(a),Q.createDataFile(M.dirname(a),M.basename(a),b.result,!0,!0,!0),h++,h+i==j&&k()};b.onerror=function(){i++,h+i==j&&k()}});f.onerror=c};e.onerror=c}},R={DEFAULT_POLLMASK:5,calculateAt:function(a,b,c){if(M.isAbs(b))return b;var d;if(a===-100)d=Q.cwd();else{a=R.getStreamFromFD(a);d=a.path}if(b.length==0){if(!c)throw new Q.ErrnoError(44);return d}return M.join2(d,b)},doStat:function(a,b,c){try{var d=a(b)}catch(a){if(a&&a.node&&M.normalize(b)!==M.normalize(Q.getPath(a.node)))return-54;throw a}C[c>>2]=d.dev;C[c+8>>2]=d.ino;C[c+12>>2]=d.mode;D[c+16>>2]=d.nlink;C[c+20>>2]=d.uid;C[c+24>>2]=d.gid;C[c+28>>2]=d.rdev;K=[d.size>>>0,(J=d.size,+Math.abs(J)>=1?J>0?(Math.min(+Math.floor(J/4294967296),4294967295)|0)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[c+40>>2]=K[0],C[c+44>>2]=K[1];C[c+48>>2]=4096;C[c+52>>2]=d.blocks;K=[Math.floor(d.atime.getTime()/1e3)>>>0,(J=Math.floor(d.atime.getTime()/1e3),+Math.abs(J)>=1?J>0?(Math.min(+Math.floor(J/4294967296),4294967295)|0)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[c+56>>2]=K[0],C[c+60>>2]=K[1];D[c+64>>2]=0;K=[Math.floor(d.mtime.getTime()/1e3)>>>0,(J=Math.floor(d.mtime.getTime()/1e3),+Math.abs(J)>=1?J>0?(Math.min(+Math.floor(J/4294967296),4294967295)|0)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[c+72>>2]=K[0],C[c+76>>2]=K[1];D[c+80>>2]=0;K=[Math.floor(d.ctime.getTime()/1e3)>>>0,(J=Math.floor(d.ctime.getTime()/1e3),+Math.abs(J)>=1?J>0?(Math.min(+Math.floor(J/4294967296),4294967295)|0)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[c+88>>2]=K[0],C[c+92>>2]=K[1];D[c+96>>2]=0;K=[d.ino>>>0,(J=d.ino,+Math.abs(J)>=1?J>0?(Math.min(+Math.floor(J/4294967296),4294967295)|0)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[c+104>>2]=K[0],C[c+108>>2]=K[1];return 0},doMsync:function(a,b,c,d,e){if(!Q.isFile(b.node.mode))throw new Q.ErrnoError(43);if(d&2)return 0;a=B.slice(a,a+c);Q.msync(b,a,e,c,d)},varargs:void 0,get:function(){R.varargs+=4;var a=C[R.varargs-4>>2];return a},getStr:function(a){a=fa(a);return a},getStreamFromFD:function(a){a=Q.getStream(a);if(!a)throw new Q.ErrnoError(8);return a}};function Ma(a,b){try{if(b===0)return-28;var c=Q.cwd(),d=z(c)+1;if(b<d)return-68;ga(c,a,b);return d}catch(a){if(typeof Q=="undefined"||!(a instanceof Q.ErrnoError))throw a;return-a.errno}}function Na(){H("")}function Oa(a,b,c){B.copyWithin(a,b,b+c)}function Pa(){return 2147483648}function Qa(a){try{v.grow(a-ha.byteLength+65535>>>16);ia(v.buffer);return 1}catch(a){}}function Ra(a){var b=B.length;a=a>>>0;var c=Pa();if(a>c)return!1;var d=function(a,b){return a+(b-a%b)%b};for(var e=1;e<=4;e*=2){var f=b*(1+.2/e);f=Math.min(f,a+100663296);f=Math.min(c,d(Math.max(a,f),65536));f=Qa(f);if(f)return!0}return!1}var Sa={};function Ta(){return l||"./this.program"}function S(){if(!S.strings){var a=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8";a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:a,_:Ta()};for(var b in Sa)Sa[b]===void 0?delete a[b]:a[b]=Sa[b];var c=[];for(var b in a)c.push(b+"="+a[b]);S.strings=c}return S.strings}function Ua(b,a,c){for(var d=0;d<b.length;++d)A[a++>>0]=b.charCodeAt(d);c||(A[a>>0]=0)}function Va(a,b){var c=0;S().forEach(function(d,e){var f=b+c;D[a+e*4>>2]=f;Ua(d,f);c+=d.length+1});return 0}function Wa(a,b){var c=S();D[a>>2]=c.length;var d=0;c.forEach(function(a){d+=a.length+1});D[b>>2]=d;return 0}function Xa(a){a,na()||(w=!0),m(a,new Aa(a))}function Ya(a,b){a,Xa(a)}j=Ya;function Za(a){try{a=R.getStreamFromFD(a);Q.close(a);return 0}catch(a){if(typeof Q=="undefined"||!(a instanceof Q.ErrnoError))throw a;return a.errno}}function $a(a,b){return b+2097152>>>0<4194305-!!a?(a>>>0)+b*4294967296:NaN}function ab(a,b,c,d,e){try{b=$a(b,c);if(isNaN(b))return 61;c=R.getStreamFromFD(a);Q.llseek(c,b,d);K=[c.position>>>0,(J=c.position,+Math.abs(J)>=1?J>0?(Math.min(+Math.floor(J/4294967296),4294967295)|0)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[e>>2]=K[0],C[e+4>>2]=K[1];c.getdents&&b===0&&d===0&&(c.getdents=null);return 0}catch(a){if(typeof Q=="undefined"||!(a instanceof Q.ErrnoError))throw a;return a.errno}}function bb(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=D[b>>2],h=D[b+4>>2];b+=8;g=Q.write(a,A,g,h,d);if(g<0)return-1;e+=g}return e}function cb(a,b,c,d){try{a=R.getStreamFromFD(a);a=bb(a,b,c);D[d>>2]=a;return 0}catch(a){if(typeof Q=="undefined"||!(a instanceof Q.ErrnoError))throw a;return a.errno}}function T(a){return ja.get(a)}function db(a){a=c["_"+a];return a}function eb(b,a){A.set(b,a)}function fb(a,b,c,d,e){var f={string:function(a){var b=0;if(a!==null&&a!==void 0&&a!==0){var c=(a.length<<2)+1;b=ib(c);ga(a,b,c)}return b},array:function(a){var b=ib(a.length);eb(a,b);return b}};function g(a){if(b==="string")return fa(a);return b==="boolean"?Boolean(a):a}a=db(a);var h=[],i=0;if(d)for(var j=0;j<d.length;j++){var k=f[c[j]];k?(i===0&&(i=Y()),h[j]=k(d[j])):h[j]=d[j]}k=a.apply(null,h);function e(a){i!==0&&Z(i);return g(a)}k=e(k);return k}p=function(a,b,c,d){a||(a=this),this.parent=a,this.mount=a.mount,this.mounted=null,this.id=Q.nextInode++,this.name=b,this.mode=c,this.node_ops={},this.stream_ops={},this.rdev=d};var U=292|73,V=146;Object.defineProperties(p.prototype,{read:{get:function(){return(this.mode&U)===U},set:function(a){a?this.mode|=U:this.mode&=~U}},write:{get:function(){return(this.mode&V)===V},set:function(a){a?this.mode|=V:this.mode&=~V}},isFolder:{get:function(){return Q.isDir(this.mode)}},isDevice:{get:function(){return Q.isChrdev(this.mode)}}});Q.FSNode=p;Q.staticInit();var gb={t:Ca,a:Fa,s:Ha,b:Ea,n:Ma,u:Na,o:Oa,m:Ra,q:Va,r:Wa,k:j,p:Za,l:ab,h:cb,f:qb,i:pb,g:nb,v:tb,w:sb,c:ob,d:lb,e:mb,j:rb};za();c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.y).apply(null,arguments)};c._encode_progressive_jpeg=function(){return(c._encode_progressive_jpeg=c.asm.A).apply(null,arguments)};var hb=c._malloc=function(){return(hb=c._malloc=c.asm.B).apply(null,arguments)};c._free=function(){return(c._free=c.asm.C).apply(null,arguments)};var W=c._setThrew=function(){return(W=c._setThrew=c.asm.D).apply(null,arguments)},X=c.setTempRet0=function(){return(X=c.setTempRet0=c.asm.E).apply(null,arguments)},Y=c.stackSave=function(){return(Y=c.stackSave=c.asm.F).apply(null,arguments)},Z=c.stackRestore=function(){return(Z=c.stackRestore=c.asm.G).apply(null,arguments)},ib=c.stackAlloc=function(){return(ib=c.stackAlloc=c.asm.H).apply(null,arguments)},jb=c.___cxa_can_catch=function(){return(jb=c.___cxa_can_catch=c.asm.I).apply(null,arguments)},kb=c.___cxa_is_pointer_type=function(){return(kb=c.___cxa_is_pointer_type=c.asm.J).apply(null,arguments)};function lb(a,b,c){var d=Y();try{T(a)(b,c)}catch(a){Z(d);if(a!==a+0)throw a;W(1,0)}}function mb(a,b,c,d){var e=Y();try{T(a)(b,c,d)}catch(a){Z(e);if(a!==a+0)throw a;W(1,0)}}function nb(a,b,c,d){var e=Y();try{return T(a)(b,c,d)}catch(a){Z(e);if(a!==a+0)throw a;W(1,0)}}function ob(a,b){var c=Y();try{T(a)(b)}catch(a){Z(c);if(a!==a+0)throw a;W(1,0)}}function pb(a,b,c){var d=Y();try{return T(a)(b,c)}catch(a){Z(d);if(a!==a+0)throw a;W(1,0)}}function qb(a,b){var c=Y();try{return T(a)(b)}catch(a){Z(c);if(a!==a+0)throw a;W(1,0)}}function rb(a,b,c,d,e,f){var g=Y();try{T(a)(b,c,d,e,f)}catch(a){Z(g);if(a!==a+0)throw a;W(1,0)}}function sb(a){var b=Y();try{T(a)()}catch(a){Z(b);if(a!==a+0)throw a;W(1,0)}}function tb(a,b,c,d,e,f){var g=Y();try{return T(a)(b,c,d,e,f)}catch(a){Z(g);if(a!==a+0)throw a;W(1,0)}}c.ccall=fb;var $;F=function a(){$||ub(),$||(F=a)};function ub(a){a||k;if(E>0)return;oa();if(E>0)return;function b(){if($)return;$=!0;c.calledRun=!0;if(w)return;pa();d(c);qa()}b()}ub();return c.ready}}();typeof f==="object"&&typeof e==="object"?e.exports=h:typeof define==="function"&&define.amd?define([],function(){return h}):typeof f==="object"&&(f.Module=h)}),null);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){var g;function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return(g||(g=b("Promise"))).resolve(a.apply(c,e))}catch(a){return(g||(g=b("Promise"))).reject(a)}}f.promiseCallSync=a}),66);
__d("WAPromiseManagement",["WAPromiseCallSync"],(function(a,b,c,d,e,f,g){function a(a){var b=null,c=function(){b||(b=d("WAPromiseCallSync").promiseCallSync(a)["finally"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function b(a,b){var c=new Map();return function(d){var e=a(d),f=c.get(e);if(f)return f;try{f=Promise.resolve(b(d))}catch(a){f=Promise.reject(a)}d=f["finally"](function(){return void c["delete"](e)});c.set(e,d);return d}}var h=new Set();function c(a){h.add(a),a["finally"](function(){h["delete"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=b;g.preventGarbageCollection=c}),98);
__d("WALoadMozjpegWasm",["Promise","WAMozjpegWasm","WAPromiseManagement","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([" failed to load mozjpeg wasm ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["no cached mozjpeg wasm, start fetching a new one"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["loaded cached mozjpeg wasm"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["start loading mozjpeg wasm..."]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS(["load-mozjpeg-wasm"]),n=null;function a(a){m.DEV(l());if(n!=null){m.DEV(k());return(h||(h=b("Promise"))).resolve(n)}m.DEV(j());return o(a).then(function(a){n=a;return n})}var o=d("WAPromiseManagement").cacheWhilePending(function(){return"all"},function(a){return c("WAMozjpegWasm")({locateFile:function(){return a}})["catch"](function(a){m.ERROR(i(),a);throw a})});g.loadMozjpegWasm=a}),98);
__d("MAWImagePreProcess",["MAWImageUtils","MAWMediaPreProcessQpl","Promise","WADecodeImage","WAEncodeProgressiveJpeg","WALoadMozjpegWasm","WATagsLogger","asyncToGeneratorRuntime","bx","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start jpeg transcoding through mozjpeg"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through mozjpeg: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"]);o=function(){return a};return a}var p=d("WATagsLogger").TAGS(["image preprocess"]),q=85;function e(a,c){c?c=a.type==="image/webp"?(h||(h=b("Promise"))).resolve(a):r(a,"image/webp"):c=a.type==="image/gif"?(h||(h=b("Promise"))).resolve(a):r(a,"image/jpeg");return c.then(function(c){return(h||(h=b("Promise"))).all([u(a,400),t(c),c])}).then(function(a){var c=a[0],d=a[1];a=a[2];return(h||(h=b("Promise"))).resolve({args:{imageSpec:d,thumbnailUrlAndSpec:c},file:a,type:"image"})})}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){p.DEV(m(),a.name);var e=c("gkx")("8220"),f=d("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",a);f.addAnnotations({bool:{isProgressiveJpegEncodeEnabled:e},string:{targetMimetype:b}});e=e&&b==="image/jpeg"?yield w(a,q,f)["catch"](function(a){p.ERROR(l(),a);f.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:a.toString()}});return null}):yield v(a,b,q)["catch"](function(a){p.ERROR(k(),a);return null});if(e==null){f.endFail("unable_to_transcode_image");throw c("err")("unable to transcode image")}f.endSuccess({"int":{compressed_file_size:e.size}});return e});return s.apply(this,arguments)}function t(b){b=a.URL.createObjectURL(b);return d("MAWImageUtils").urlToFile(b,d("MAWImageUtils").TYPE_JPEG).then(function(a){var b=a.height;a=a.width;return{height:b,width:a}})}function u(b,c){b=a.URL.createObjectURL(b);return d("MAWImageUtils").urlToThumbnail(b,c)}function v(b,c,e){p.DEV(o());var f=a.URL.createObjectURL(b),g=b.name;return d("MAWImageUtils").urlToFile(f,c,e).then(function(a){a=a.blob;p.DEV(n(),a.size);return new File([a],g,{type:c})})}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){p.DEV(j());var g=c("bx").getURL(c("bx")("10961"));g=(yield (h||(h=b("Promise"))).all([d("WALoadMozjpegWasm").loadMozjpegWasm(g)["catch"](function(a){f.addPoint("load_mozjpeg_wasm_failure");throw a}),d("WADecodeImage").decodeImageWithDOM(a)["catch"](function(a){f.addPoint("image_decode_failure");throw a})]));var k=g[0];g=g[1];k=d("WAEncodeProgressiveJpeg").createEncodeProgressiveJpeg(k);k=k({imageData:g,quality:e,useHdScanConfig:!0});p.DEV(i(),k.length);return new File([k],a.name,{type:"image/jpeg"})});return x.apply(this,arguments)}g.imagePreprocess=e;g.getImageSpec=t;g.getJpegThumbnailInfo=u}),98);
__d("MessageSendsClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1271");b=d("FalcoLoggerInternal").create("message_sends_client",a);e=b;g["default"]=e}),98);
__d("MWLogSend",["ErrorGuard","FBLogger","I64","LSDatabaseSingleton","LSPlatformLsInitLog","MessageSendsClientFalcoEvent","MultipleTabsLogger","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=[];function m(){while(l.length>0)(j||(j=c("ErrorGuard"))).applyWithGuard(p,null,[l.shift(),!0])}(a=document)==null?void 0:a.addEventListener("visibilitychange",function(){var a;((a=document)==null?void 0:a.visibilityState)==="hidden"&&m()});var n=!1;function o(a){l.push(a),n||(d("LSPlatformLsInitLog").onCompleteOrFail(m),n=!0)}function p(a,e){a._mentionedJids;var f=a.actor,g=a.attachmentFbids,j=a.attachmentType,l=a.backend,m=a.hasReply,n=a.initatingSource,p=a.messagingThreadId,q=a.msgTtl,r=a.offlineThreadingId,s=a.sendType,t=a.source,u=a.threadKey,v=a.threadType;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var w=(yield k||(k=c("LSDatabaseSingleton")));yield (i||(i=b("Promise"))).all([d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(w.table("participants")).getKeyRange(u).filter(function(a){return!(h||(h=d("I64"))).equal(a.contactId,f)})),d("MultipleTabsLogger").hasMultipleTabs()]).then(function(b){var f=b[0],i=b[1];if(f==null){b=d("LSPlatformLsInitLog").isPending();if(b&&e!==!0){o(a);return}e===!0&&c("FBLogger")("mpf_web_foundations").warn("LS_INIT completed but participants table is still empty.")}var k=f.map(function(a){return(h||(h=d("I64"))).to_string(a.contactId)}),w=p!=null?p:(h||(h=d("I64"))).to_string(u),x=q!=null?(h||(h=d("I64"))).to_string((h||(h=d("I64"))).of_float(q)):void 0;c("MessageSendsClientFalcoEvent").log(function(){return{backend:l,event_type:s,feature_tags:i===!0?[19]:[],group_thread_subtype:void 0,igd_action:void 0,igd_target_type:void 0,igd_verb:void 0,initiating_app_id:void 0,initiating_source:n,is_reply:m,message_attachment_fbids:g.map(String),message_id:void 0,message_type:j,messaging_thread_fbid:w,messaging_thread_type:(h||(h=d("I64"))).to_int32(v),msg_ttl:x,nav_chain:void 0,nonce:void 0,offline_threading_id:r,recipient_fbids:k,send_attribution:h.to_int32(t),send_attribution_raw:void 0,view_mode:void 0}})})})())}g.log=p}),98);
__d("DoubleKeyMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.set=function(a,b,c){var d=this.$1.get(a);d||this.$1.set(a,d=new Map());d.set(b,c)};b.get=function(a,b){return(a=this.$1.get(a))==null?void 0:a.get(b)};b["delete"]=function(a,b){var c=this.$1.get(a);c&&(c["delete"](b),c.size===0&&this.$1["delete"](a))};b.getAll=function(a){return this.$1.get(a)};b.deleteAll=function(a){this.$1["delete"](a)};return a}();f.DoubleKeyMap=a}),66);
__d("NestedTimeRange",["SimpleHook","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new(d("SimpleHook").SimpleHook)(),k=new(d("SimpleHook").SimpleHook)(),l="/";function m(a,b){return""+a+l+b}b=function(){function a(a,b){b===void 0&&(b=null),this.$3=0,this.$1=a,this.$2=b}var b=a.prototype;b.isRunning=function(){return this.$3>0};b.fullname=function(){return this.$2!==null?m(this.$2.fullname(),this.$1):this.$1};b.start=function(a){a===void 0&&(a=(h||(h=c("performanceAbsoluteNow")))());if(this.$3===0){var b;(b=this.$2)==null?void 0:b.start(a);this.__onStart(a)}++this.$3;return a};b.__onStart=function(a){j.call(this,a)};b.stop=function(a){a===void 0&&(a=(h||(h=c("performanceAbsoluteNow")))());--this.$3;if(this.$3===0){var b;this.__onStop(a);(b=this.$2)==null?void 0:b.stop(a)}return a};b.__onStop=function(a){k.call(this,a)};return a}();function a(){(i||(i=c("performance"))).mark&&(i||(i=c("performance"))).measure&&(j.add(function(a,b){(i||(i=c("performance"))).mark(a.fullname()+"_start")}),k.add(function(a,b){(i||(i=c("performance"))).measure(a.fullname(),a.fullname()+"_start")}))}g.OnRangeStart=j;g.OnRangeStop=k;g.TIME_RANGE_LEVEL_SEPARATOR=l;g.rangeFullName=m;g.NestedTimeRange=b;g.enableDevConsoleTimeline=a}),98);
__d("QLogEvent",["DoubleKeyMap","FBLogger","NestedTimeRange","QPLEvent","SimpleHook","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("DoubleKeyMap").DoubleKeyMap)(),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=b.call(this,a,d)||this;a.$QPLRange1=c;i.set(c,a.fullname(),babelHelpers.assertThisInitialized(a));return a}var e=a.prototype;e.__onStart=function(a){b.prototype.__onStart.call(this,a),this.$QPLRange1.point(this.fullname()+"_START",{timestamp:a})};e.__onStop=function(a){b.prototype.__onStop.call(this,a),this.$QPLRange1.point(this.fullname()+"_END",{timestamp:a}),i["delete"](this.$QPLRange1,this.fullname())};e.range=function(b){this.fullname().startsWith(d("NestedTimeRange").TIME_RANGE_LEVEL_SEPARATOR)||c("FBLogger")("qpl").warn("Range %s cannot have subrange since root name does not start with /",this.fullname());var e=d("NestedTimeRange").rangeFullName(this.fullname(),b);return(e=i.get(this.$QPLRange1,e))!=null?e:new a(b,this.$QPLRange1,this)};return a}(d("NestedTimeRange").NestedTimeRange),k=new(d("DoubleKeyMap").DoubleKeyMap)(),l=new((b=d("SimpleHook")).SimpleHook)(),m=new b.SimpleHook(),n=new b.SimpleHook(),o=new b.SimpleHook(),p=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;c===void 0&&(c=0);e===void 0&&(e=2);f===void 0&&(f=!1);var i=(h||(h=d("QPLEvent"))).getMarkerId(a);g=b.call(this,"event_"+i)||this;g.event=a;g.instanceKey=c;g.$QPLEvent1=e;g.isUserFlow=f;k.set(i,c,babelHelpers.assertThisInitialized(g));return g}var e=a.prototype;e.action=function(a){this.$QPLEvent1=a;return this};e.getAction=function(){return this.$QPLEvent1};e.setIsUserFlow=function(a){this.isUserFlow=a;return this};e.startFromNavStart=function(){this.start(c("performanceNavigationStart")());return this};e.startFromTime=function(a){this.start(a);return this};e.__onStart=function(a){l.call(this,a)};e.__onStop=function(a){m.call(this,a),i.deleteAll(this),k["delete"]((h||(h=d("QPLEvent"))).getMarkerId(this.event),this.instanceKey)};e.range=function(a){var b;return(b=i.get(this,a))!=null?b:new j(a,this)};e.point=function(a,b){b===void 0&&(b={});n.call(this,a,b);return this};e.annotate=function(a){o.call(this,a);return this};return a}(d("NestedTimeRange").NestedTimeRange);function a(a,b){var c;b===void 0&&(b=0);return(c=k.get((h||(h=d("QPLEvent"))).getMarkerId(a),b))!=null?c:new p(a,b)}g.OnEventStart=l;g.OnEventStop=m;g.OnEventPoint=n;g.OnEventAnnotate=o;g.QPLEvent=p;g.event=a}),98);
__d("TimedOnceFunc",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(a,b){this.$2=!1,this.$4=a,this.$3=b,(h||(h=c("ExecutionEnvironment"))).isInBrowser&&this.$5()}var b=a.prototype;b.$6=function(){this.$1!=null&&clearTimeout(this.$1),this.$1=null};b.$5=function(){var a=this;this.isDone()||(this.$6(),this.$1=setTimeout(function(){a.$2=!0,a.run()},this.$3))};b.isDone=function(){return this.$4===null};b.isCancelled=function(){return this.$1===null&&this.$4!==null};b.run=function(){this.$6();if(this.$4!=null){var a=this.$4;this.$4=null;a(this.$2)}};b.getDelay=function(){return this.$3};b.delay=function(a){this.$3=(a=a)!=null?a:this.$3;this.$5()};b.cancel=function(){this.$6()};return a}();g.TimedOnceFunc=a}),98);
__d("VirtualMessageChannel",["invariant","Promise","SimpleHook","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=function(){function a(a){a===void 0&&(a=!1),this.$2=new(d("SimpleHook").SimpleHook)(),this.onmessage=null,this.onmessageerror=null,this.$3=a}var e=a.prototype;e.setRemotePort=function(a){this.$1=a};e.addEventListener=function(a,b,c){(a==="message"||a==="error")&&c==null||h(0,55320,a);if(a==="message")if(typeof b==="function")this.$2.add(b);else{c=b.handleEvent.bind(b);this.$2.add(c);b.__handler=c}};e.removeEventListener=function(a,b,c){if(typeof b==="function")this.$2.remove(b);else{a=b.__handler;this.$2.remove(a)}};e.postMessage=function(a,d){var e=this,f=function(){var b=c("nullthrows")(e.$1,"By now remote port must have value!");b.$2.call({data:a,ports:d})};this.$3?f():c("promiseDone")((i||(i=b("Promise"))).resolve(),f)};e.start=function(){};return a}();a=function(a,b){this.port1=new j(a),this.port2=new j(b),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};g.VirtualMessagePort=j;g.VirtualMessageChannel=a}),98);
__d("WorkerMessagePort",["FBLogger","MainPageUrl","Promise","PromiseAnnotate","QLogEvent","SimpleHook","VirtualMessageChannel","performanceAbsoluteNow","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=20,l=100,m=50;function n(a){return a}var o=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("SimpleHook").SimpleHook);function p(a,b){a=n(a);a.__timing=b}function q(a){return a.__timing}var r=0;function s(){return d("QLogEvent").event(c("qpl")._(41497718,"106"),r++)}var t=Math.random()<.1;function u(a,b,c){var d;if(b==null||!t)return;var e=b.sendDelayHighPrecision,f=b.sendTimestamp,g=b.sendDateTime,h=b.receiveTimestamp;b=b.receiveDateTime;d=(d=c)!=null?d:s();c==null&&d.startFromTime();var i=d.range("SEND_DELAY");i.start(f);i.stop(h);i=d.range("SEND_DELAY_LOW_PRECISION");i.start(g);i.stop(b);i=Math.abs(f-g);f=Math.abs(h-b);d.annotate({string:{port_name:a},"int":{send_delay:e,send_drift:i,receive_drift:f},bool:{send_delay_above_max:e!=null&&e>k,send_drift_above_max:i>l,receive_drift_above_max:f>l}});c==null&&d.stop()}a=function(){var a=e.prototype;a.onMessageHandler=function(a){try{this.onMessage.call(a);var b=this.$1[a.type];!b?this.onUnhandledMessage.call(a):b.call(a)}catch(a){this.onError.call(a)}};function e(a,b){var d=this;this.$1={};this.onUnhandledMessage=new o();this.onMessage=new o();this.onPostMessage=new o();this.onError=new o();this.$2=a;this.name=b;this.$2.addEventListener("message",function(a){return d.onMessageHandler(n(a.data))});this.$2.addEventListener("error",function(a){return d.onError.call(a)});this.onPostMessage.add(function(a){p(a,{sendTimestamp:(j||(j=c("performanceAbsoluteNow")))(),receiveTimestamp:-1,sendDelayHighPrecision:0,sendDateTime:Date.now(),receiveDateTime:-1,sendDelayLowPrecision:0})});this.onMessage.add(function(a){a=q(a);if(a!=null){var b=a.sendTimestamp,e=a.sendDateTime,f=(j||(j=c("performanceAbsoluteNow")))(),g=Date.now();a.receiveTimestamp=f;a.receiveDateTime=g;a.sendDelayHighPrecision=f-b;a.sendDelayLowPrecision=g-e;u(d.name,a)}})}a.postMessage=function(a,b){this.onPostMessage.call(a),b?this.$2.postMessage(a,b):this.$2.postMessage(a)};a.addMessageListener=function(a,b){var c=this.$1[a];c||(c=new o(),this.$1[a]=c);return c.add(b)};a.removeMessageListener=function(a,b){a=this.$1[a];return!!a&&a.remove(b)};a.onMessageOnce=function(a,c){var d=this;return new(i||(i=b("Promise")))(function(b){var e=d.addMessageListener(a,function(f){c(f)&&(d.removeMessageListener(a,e),b(f))})})};a.close=function(){if(this.$2 instanceof MessagePort)this.$2.close();else if(this.$2 instanceof Worker)this.$2.terminate();else if(this.$2 instanceof DedicatedWorkerGlobalScope)this.$2.close();else{var a;(a=(a=this.$2.close)!=null?a:this.$2.terminate)==null?void 0:a.call(this.$2)}};a.isWrappingVirtualMessagePort=function(){return this.$2 instanceof d("VirtualMessageChannel").VirtualMessagePort};return e}();function v(a){return n(a)}e=function(a){babelHelpers.inheritsLoose(e,a);function e(e,f){var g;g=a.call(this,e,f)||this;var j=v(babelHelpers.assertThisInitialized(g));e=j.onMessageOnce("endpoint_started",function(){return!0});f=j.onMessageOnce("endpoint_started_received",function(){return!0});void (h||(h=d("PromiseAnnotate"))).setDisplayName(e,"endpoint_started");void h.setDisplayName(f,"endpoint_started_received");j.postMessage({type:"endpoint_started",endpoint:g.name});c("promiseDone")(e,function(a){var b=q(a);j.postMessage({type:"endpoint_started_received",endpoint:a.endpoint,targetEndpoint:g.name,startSendTimestamp:b==null?void 0:b.sendTimestamp});u(g.name,b)});c("promiseDone")(f,function(a){var b=q(a);if(b!=null){var c=s();c.startFromTime();u(g.name,b,c);var d=c.range("ROUND_TRIP");d.start(a.startSendTimestamp);d.stop(b.receiveTimestamp);d=b.receiveTimestamp-a.startSendTimestamp;c.annotate({"int":{round_trip:d},bool:{round_trip_above_max:d>m}}).stop()}});g.fullyConnected=(i||(i=b("Promise"))).race([e,f]).then(function(){return babelHelpers.assertThisInitialized(g)});return g}return e}(a);g.getMessageTiming=q;g.WorkerMessagePort=a;g.CastWorkerMessagePort=v;g.WorkerSyncedMessagePort=e}),98);
__d("FuncChannel",["FBLogger","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var d=this,e;this.$2=[];this.callMessageHandler=function(a){return new(h||(h=b("Promise")))(function(b,c){a.result={resolveFunc:b,rejectFunc:c},d.$2.push(a)})};this.messageToCall=function(a){var b,e,f=d.proxyMethods[a.method];if(typeof f!=="function"){c("FBLogger")("worker").mustfix("proxyMethods[%s] is not a functions",a.method);return}b=(b=a.result)==null?void 0:b.resolveFunc;e=(e=a.result)==null?void 0:e.rejectFunc;if(typeof b==="function"&&typeof e==="function")try{var g=f.apply(a.thisArg,a.argList);b(g)}catch(a){e(a)}else return f.apply(a.thisArg,a.argList)};var f=this,g={},i=(e=a==null?void 0:a(g))!=null?e:{},j=babelHelpers["extends"]({},g);function k(a){j[a]=function(){var b={type:"call",method:a,thisArg:null,argList:Array.from(arguments)};return f.callMessageHandler(b)},g[a]=function(){var b=f.$1[a];if(typeof b!=="function"){c("FBLogger")("worker").mustfix("_backend[%s] is not a functions",a);return}return b.apply(f.$1,arguments)},i[a]==null&&(i[a]=g[a])}this.$1=j;if(a!=null){e=Object.keys(i);e.forEach(k);this.proxyMethods=i}else this.proxyMethods=new Proxy(i,{get:function(a,b){a=b;i[a]==null&&k(a);return i[a]}})}var d=a.prototype;d.flushBuffer=function(){var a=this.$2;this.$2=[];a.forEach(this.messageToCall)};d.setBackend=function(a){this.$1!==a&&(this.$1=a,this.flushBuffer());return this};d.setCallMessageHandler=function(a){this.callMessageHandler=a,this.flushBuffer()};return a}();g["default"]=a}),98);
__d("WorkerFuncChannel",["invariant","DateConsts","ExecutionEnvironment","FBLogger","FuncChannel","MainPageUrl","Promise","TimedOnceFunc","VirtualMessageChannel","WorkerMessagePort","err","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k={serialize:function(a,b){b.push(a);return a},deserialize:function(a){return a}},l=1e4,m=0,n=5,o=n+1,p=function(){function a(a){var b=self.WeakRef;b&&(this.$1=new b(a))}var b=a.prototype;b.isDead=function(){return this.$1!=null&&this.$1.deref()==null};return a}(),q=function(e){babelHelpers.inheritsLoose(a,e);function a(a,b,f,g){var i;f===void 0&&(f=null);g===void 0&&(g={});i=e.call(this,a)||this;i.$WorkerFuncChannel1=new Map();i.$WorkerFuncChannel2=new Map();i.$WorkerFuncChannel5={"function":{serialize:function(a,b){b=o++;i.$WorkerFuncChannel1.set(b,a);a={type:"function",value:b};return a},deserialize:function(a){var b=babelHelpers.assertThisInitialized(i),c=a.value;a=function(){var a={type:"call",id:c,method:"__anonymous",thisArg:null,argList:Array.from(arguments)};return b.callMessageHandler(a)};i.$WorkerFuncChannel2.set(c,new p(a));return a}},custom:{serialize:function(a,b){var c=a.constructor.name,d=i.$WorkerFuncChannel4[c];d!=null||h(0,63779,c);d=d.serialize(a,b);return{type:"custom",custom:c,value:d}},deserialize:function(a){var b=a.custom,c=i.$WorkerFuncChannel4[b];c!=null||h(0,63779,b);return c.deserialize(a.value)}},error:{serialize:function(a,b){b={name:a.name,message:a.message,stack:a.stack};return{type:"error",value:b}},deserialize:function(a){var b=c("err")(a.value.message);b.name=a.value.name;b.stack=a.value.stack;return b}},object:{serialize:function(a,b){b=a.constructor;if(b!==Object)throw new Error("Cannot clone class object");return{type:"object",value:a}},deserialize:function(a){return a.value}},raw:{serialize:function(a,b){return{type:"raw",value:a}},deserialize:function(a){return a.value}}};i.name=b;i.$WorkerFuncChannel3=f;i.$WorkerFuncChannel4=g;a=function(a){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("adsworker").debug("[Channel] removing callback ids: %s",a.join()),a.forEach(function(a){return i.$WorkerFuncChannel1["delete"](a)})};var k=i.__remoteInternalFunc(m,a);typeof jest===typeof void 0&&(j||(j=c("ExecutionEnvironment"))).isInBrowser&&setInterval(function(){var a=[];i.$WorkerFuncChannel2.forEach(function(b,c){b.isDead()&&(a.push(c),i.$WorkerFuncChannel2["delete"](c))});a.length>0?k(a):i.$WorkerFuncChannel2.size>5e3&&c("FBLogger")("adsworker").warn("[%s] has too many remaining refs %s",i.name,i.$WorkerFuncChannel2.size)},l);return i}var f=a.prototype;f.__remoteInternalFunc=function(a,b){(a>n||this.$WorkerFuncChannel1.get(a)!=null)&&c("FBLogger")("adsworker").mustfix("invalid internal func id %s",a);this.$WorkerFuncChannel1.set(a,b);b=this.$WorkerFuncChannel5["function"].deserialize({type:"function",value:a});return b};f.$WorkerFuncChannel6=function(a){return a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};f.$WorkerFuncChannel7=function(a){if(typeof a==="function")return"function";if(a===null)return"raw";if(typeof a!=="object")return"raw";if(Array.isArray(a))return"raw";if(this.$WorkerFuncChannel6(a))return"raw";var b=a.constructor.name;if(this.$WorkerFuncChannel4[b])return"custom";return a instanceof Error?"error":"object"};f.$WorkerFuncChannel8=function(a,b){var c=this.$WorkerFuncChannel7(a);return this.$WorkerFuncChannel5[c].serialize(a,b)};f.$WorkerFuncChannel9=function(a){var b=a;if(a!==null&&typeof a==="object"&&typeof a.type==="string"){var c=this.$WorkerFuncChannel5[a.type];if(c)return c.deserialize(a)}return b};f.__onPostOutMessage=function(a){return a};f.__callCallback=function(a,b){a.apply(null,b.argList)};f.setOutMessagePort=function(a,d){var e=this,f=[];this.setCallMessageHandler(function(d){d.thisArg=e.name;var g=[];d.argList=d.argList.map(function(a){return e.$WorkerFuncChannel8(a,g)});var h=new(i||(i=b("Promise")))(function(a,b){d.result={resolveFunc:e.$WorkerFuncChannel8(a,g),rejectFunc:e.$WorkerFuncChannel8(b,g)}}),j=e.__onPostOutMessage(d);j!=null&&(f!=null?f.push({message:d,transferList:g}):a.postMessage(d,g));h["catch"](function(a){c("FBLogger")("worker").catching(a).mustfix("Error: channel %s, remote call of %s returned error %s",e.name,d.method,a.message)});return h});c("promiseDone")(d||x.waitForRemote(this.name),function(){var b=f;f=null;b==null?void 0:b.forEach(function(b){a.postMessage(b.message,b.transferList)});e.$WorkerFuncChannel3==null?void 0:e.$WorkerFuncChannel3()})};f.__messageToCall=function(a){var b=this;a.argList=a.argList.map(function(a){return b.$WorkerFuncChannel9(a)});if(a.result){var d=a.result,e=d.resolveFunc;d=d.rejectFunc;e=this.$WorkerFuncChannel9(e);d=this.$WorkerFuncChannel9(d);a.result={resolveFunc:e,rejectFunc:d}}e=a.id;if(e===void 0)this.messageToCall(a);else{d=this.$WorkerFuncChannel1.get(e);d?this.__callCallback(d,a):c("FBLogger")("adsworker").mustfix("Error: callback is called but no longer available")}};f.setInMessagePort=function(a){var b=this;a.addMessageListener("call",function(a){typeof a.thisArg==="string"&&a.thisArg===b.name&&b.__messageToCall(a)});x.notifyReady(this.name)};f.setMessagePort=function(a){this.setInMessagePort(a);this.setOutMessagePort(a);return this};return a}(c("FuncChannel")),r=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WorkerMessagePort").WorkerMessagePort);function s(a,b,d,e){x.exportChannel(a,function(e){var f=e.syncPort;e=e.remoteNativePort;var g=b();a===g.name||h(0,54247,a,g.name);var i;e?(i=new r(e,f.name+"("+g.name+")"),e.start(),i.onError.add(function(a){c("FBLogger")("worker").catching(a).mustfix("error caught in remotePort");throw a})):i=f;g.setMessagePort(i).setBackend(d);c("promiseDone")(f.fullyConnected,function(){f.postMessage({type:"channelReady",channelName:g.name}),x.logState("EXPORTED",a)})})}function a(a,b,c,d){d===void 0&&(d={});return s(c,function(){return new q(function(b){return a},c,null,d)},a,b)}var t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,e){e===void 0&&(e="");var f=d("DateConsts").MS_PER_MIN*1;return b.call(this,function(){c("FBLogger")("worker").warn("Channel %s did not establish eventually. %s",a,e)},f)||this}return a}(d("TimedOnceFunc").TimedOnceFunc);function u(a,b){var e,f=null,g,h;b.isWrappingVirtualMessagePort()?(h=new(d("VirtualMessageChannel").VirtualMessageChannel)(!0,!0),e="on virtual dedicated channel"):(h=new MessageChannel(),e="on native dedicated channel",g=[h.port2]);var i=h.port1;f=h.port2;i.start();var j=new r(i,b.name+"("+a.name+")");c("promiseDone")(b.fullyConnected,function(){x.logState("IMPORTING "+e+" ",a.name);a.setInMessagePort(j);var d=new t(a.name,e);c("promiseDone")(b.onMessageOnce("channelReady",function(b){return b.channelName===a.name}),function(b){a.setOutMessagePort(j),d.cancel(),x.logState("ESTABLISHED",a.name)});b.postMessage({type:"channelImport",channelName:a.name,port:f},g)});return a.proxyMethods}function v(a,b,c,d){c===void 0&&(c=null);d===void 0&&(d={});b=new q(function(b){return a},b,c,d);return b}function e(a,b,c,d,e){d===void 0&&(d=null);e===void 0&&(e={});return u(v(a,c,d,e),b)}var w=function(){function a(){this.name=self.name+"_P"+Math.round(10*Math.random()),this.$1=new Map(),this.$2=new Set()}var e=a.prototype;e.logState=function(a,b){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("worker").debug("%s-%s %s",this.name,a,b)};e.$3=function(a){var b=this.$1.get(a);b==null&&(b={pendingPorts:null,onImportRequest:null},this.$1.set(a,b));return b};e.exportChannel=function(a,b){var d=this,e=this.$3(a);e.onImportRequest!=null&&c("FBLogger")("worker").debug("Re-exporting channel %s",a);e.onImportRequest=b;this.logState("REGISTERED",a);a=e.pendingPorts;if(a!=null){var f=a.filter(function(a){return d.$2.has(a.syncPort)});f.forEach(b);f.length<a.length?e.pendingPorts=a.filter(function(a){return!d.$2.has(a.syncPort)}):e.pendingPorts=null}return e};e.activate=function(a,b,d){var e=this;if(this.$2.has(a)){c("FBLogger")("worker").debug("Port %sis already duplicated ",a.name);return}this.$2.add(a);a.addMessageListener("channelImport",function(b){var c=b.channelName,d=e.$3(c);b={syncPort:a,remoteNativePort:b.port};d.onImportRequest!=null?d.onImportRequest(b):d.pendingPorts!=null?d.pendingPorts.push(b):d.pendingPorts=[b];e.logState("IMPORT REQUEST",c)})};e.notifyReady=function(a){};e.waitForRemote=function(a){return(i||(i=b("Promise"))).resolve()};return a}(),x=new w();function f(a,b,c){x.activate(a,b,c)}g.TransferableTransformer=k;g.WorkerFuncChannel=q;g.exportChannelOnPort=s;g.exportChannel=a;g.importChannelOnPort=u;g.makeChannel=v;g.importChannel=e;g.activateChannels=f}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("WorkerFuncChannel").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=(h||(h=c("performanceAbsoluteNow")))());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers["extends"]({},e,{timestamp:(h||(h=c("performanceAbsoluteNow")))()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=(h||(h=c("performanceAbsoluteNow")))());return a.markerEnd(b,d,e,f)}}},"qpl");function a(a){i.setMessagePort(a)}function b(a){i.setBackend(a)}g.setMessagePort=a;g.initQPL=b}),98);