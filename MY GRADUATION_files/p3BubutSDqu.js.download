;/*FB_PKG_DELIM*/

__d("LSUpdateEventStartAndEndTime",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({eventStartTimestampMs:a[1],eventEndTimestampMs:a[2]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSClearEventStartAndEndTime",["LSUpdateEventStartAndEndTime"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.islc(c.db.table(201).fetch([[[a[0]]]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.threadId)})},function(a){return c.i64.neq(d[0],void 0)?c.storedProcedure(b("LSUpdateEventStartAndEndTime"),d[0],void 0,void 0):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSClearAllCmEventStartAndEndTimes",["LSClearEventStartAndEndTime"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(a){return c.forEach(c.db.table(201).fetch(),function(a){a=a.item;return c.storedProcedure(b("LSClearEventStartAndEndTime"),a.eventId)})},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSDeleteCommunityUnjoinedChannel",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(9).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(c.threadType,b.i64.cast([0,19]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteThenInsertCommunityChannelCategory",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[1]="community",b.db.table(9).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(9).put({threadKey:a[0],parentThreadKey:a[1],mailboxType:b.i64.cast([0,0]),threadType:b.i64.cast([0,20]),threadName:a[2],folderName:c[1],authorityLevel:a[3],lastActivityTimestampMs:a[4],lastReadWatermarkTimestampMs:a[4],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0])}):(e=d.item,c[2]=e.lastActivityTimestampMs,c[4]=e.parentThreadKey,c[3]=e.disappearingThreadKey,c[5]=e.isDisappearingMode,b.i64.le(e.authorityLevel,a[3])?b.i64.gt(c[2],a[4])&&b.i64.neq(c[3],void 0)?(b.i64.eq(a[1],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[4],b.i64.cast([0,0]))?(f=[c[4],e.folderName],c[6]=f[0],c[7]=f[1],f):(d=[a[1],c[1]],c[6]=d[0],c[7]=d[1],d),b.db.table(9).put({threadKey:a[0],parentThreadKey:c[6],mailboxType:b.i64.cast([0,0]),threadType:b.i64.cast([0,20]),threadName:a[2],folderName:c[7],authorityLevel:a[3],lastActivityTimestampMs:c[2],lastReadWatermarkTimestampMs:e.lastReadWatermarkTimestampMs,removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),disappearingThreadKey:c[3],isDisappearingMode:c[5]})):b.db.table(9).put({threadKey:a[0],parentThreadKey:a[1],mailboxType:b.i64.cast([0,0]),threadType:b.i64.cast([0,20]),threadName:a[2],folderName:c[1],authorityLevel:a[3],lastActivityTimestampMs:a[4],lastReadWatermarkTimestampMs:a[4],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),disappearingThreadKey:c[3],isDisappearingMode:c[5]}):b.resolve())})},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSDeleteThenInsertCommunityUnjoinedThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[1]=a[12]==null?b.i64.cast([0,19]):a[12],c[2]="community",b.db.table(9).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(9).put({threadKey:a[0],parentThreadKey:a[1],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[2],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:a[7],lastReadWatermarkTimestampMs:a[8],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],snippetText:a[24],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0]),capabilities4:b.i64.cast([0,0])}):(e=d.item,c[3]=e.lastActivityTimestampMs,c[5]=e.parentThreadKey,c[4]=e.disappearingThreadKey,c[6]=e.isDisappearingMode,b.i64.le(e.authorityLevel,a[6])?b.i64.gt(c[3],a[7])&&b.i64.neq(c[4],void 0)?(b.i64.eq(a[1],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[5],b.i64.cast([0,0]))?(f=[c[5],e.folderName],c[7]=f[0],c[8]=f[1],f):(d=[a[1],c[2]],c[7]=d[0],c[8]=d[1],d),b.db.table(9).put({threadKey:a[0],parentThreadKey:c[7],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[8],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:c[3],lastReadWatermarkTimestampMs:e.lastReadWatermarkTimestampMs,removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],snippetText:a[24],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0]),capabilities4:b.i64.cast([0,0]),disappearingThreadKey:c[4],isDisappearingMode:c[6]})):b.db.table(9).put({threadKey:a[0],parentThreadKey:a[1],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[2],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:a[7],lastReadWatermarkTimestampMs:a[8],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],snippetText:a[24],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0]),capabilities4:b.i64.cast([0,0]),disappearingThreadKey:c[4],isDisappearingMode:c[6]}):b.resolve())})},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSLazyMessageForcedFetch",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(12).fetch([[[a[0]]],"messageId"]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(a){return d[5]=f.threadKey,c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[0]=c.i64.cast([0,1]):(e=b.item,d[7]=e.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[0]=d[6])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",d[5]),d[2].set("message_id",a[0]),d[2].set("sync_group",d[0]),d[3]=d[2].get("thread_key"),d[2],d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,19]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]))})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRefreshEventXMAsOnRSVP",["LSLazyMessageForcedFetch"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.forEach(c.filter(c.db.table(16).fetch([[[a[1]]]]),function(b){return a[0]===b.attachmentFbid&&c.i64.eq(a[1],b.threadKey)}),function(a){a=a.item;return c.storedProcedure(b("LSLazyMessageForcedFetch"),a.messageId,a.threadKey)})},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSSetNeedsAdminApprovalForNewParticipant",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({needsAdminApprovalForNewParticipant:a[1]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSSetSecondaryParentThreadKey",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({secondaryParentThreadKey:a[1]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSUpdateCommunityChannelSortOrderOverride",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}e.exports=a}),null);
__d("LSUpdateThreadJoinRequestApprovalSetting",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}e.exports=a}),null);
__d("LSDeleteAllCmFbEventData",["LSArrayGetObjectAt","LSClearAllCmEventStartAndEndTimes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSClearAllCmEventStartAndEndTimes"))},function(a){return d[0]=c.createArray(),c.forEach(c.db.table(201).fetch(),function(a){a=a.item;return d[2]=(d[0].push(a.eventId),d[0])})},function(a){return c.forEach(c.db.table(202).fetch(),function(a){a=a.item;return d[2]=(d[0].push(a.eventId),d[0])})},function(a){return c.forEach(c.db.table(238).fetch(),function(a){a=a.item;return d[2]=(d[0].push(a.eventId),d[0])})},function(a){return c.sequence([function(a){return d[2]=c.createArray(),d[3]=c.i64.of_int32(d[0].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(a){return d[5]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[0],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(a){return d[8]=(d[2].push(c.i64.to_string(d[6])),d[2])}])}):c.resolve()},function(a){return d[4]=d[2].join(","),d[1]=d[4]}])},function(a){return c.forEach(c.filter(c.db.table(200).fetch(),function(a){return d[0].some(function(b){return c.i64.eq(a.eventId,b)})}),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(202).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(201).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(238).fetch(),function(a){return a["delete"]()})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSDeleteThenInsertCmCategoryList",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(182).put({communityId:a[0],categoryId:a[1],categoryName:a[2],categoryRank:a[3],categoryType:a[4],display:a[5]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteThenInsertCmChannelEvent",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(201).put({eventId:a[0],threadId:a[1]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteThenInsertCmChannelList",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(167).put({communityId:a[0],threadId:a[1],categoryId:a[2],channelPrivacy:a[3]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteThenInsertCommunityEventsV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}e.exports=a}),null);
__d("LSDeleteThenInsertFbEvent",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(200).put({eventId:a[0],eventName:a[3],eventPictureUrl:a[5],numGoingUsers:a[8],numInterestedUsers:a[9],startTimeMs:a[1],endTimeMs:a[2],locationName:a[4],eventPictureUrlFallback:a[6],eventPictureUrlExpirationTimestampMs:a[7],rsvpStatus:a[10]})},function(a){return b.resolve(c)}])}e.exports=a}),null);